<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Advanced Functions: Mastery</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://pyscript.net/releases/2024.1.1/core.css" />
    <script type="module" src="https://pyscript.net/releases/2024.1.1/core.js"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { sans: ['Outfit', 'sans-serif'], mono: ['JetBrains Mono', 'monospace'] },
                    colors: {
                        slate: { 50: '#f8fafc', 100: '#f1f5f9', 200: '#e2e8f0', 300: '#cbd5e1', 400: '#94a3b8', 500: '#64748b', 600: '#475569', 700: '#334155', 800: '#1e293b', 900: '#0f172a' }
                    }
                }
            }
        }
    </script>
    <style>
        :root {
            color-scheme: dark;
        }

        /* Pastikan teks umum di dalam slide berwarna terang agar kontras dengan bg-slate-900 */
        .slide {
            display: none;
            color: #f1f5f9;
            /* Slate-100: Putih keabu-abuan yang lembut */
        }

        .slide.active {
            display: flex;
            flex-direction: column;
        }

        /* Perbaikan khusus untuk teks deskripsi agar tidak terlalu gelap */
        .slide p {
            color: #444444 !important;
            /* Slate-300: Abu-abu terang */
        }

        /* Pastikan judul tetap putih bersih */
        .slide h2,
        .slide h3 {
            color: #414040 !important;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(5px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .code-font {
            font-family: 'Courier New', monospace;
        }

        .kbd {
            border: 1px solid #cbd5e1;
            padding: .1rem .35rem;
            border-radius: .4rem;
            background: #f1f5f9;
            font-family: monospace;
            color: #334155;
        }

        /* IDE Styles */
        .editor-container {
            background: #1e293b;
            border-radius: 0.5rem;
            overflow: hidden;
            border: 1px solid #334155;
            position: relative;
            z-index: 10;
        }

        .editor-header {
            background: #0f172a;
            padding: 0.5rem 1rem;
            font-size: 0.75rem;
            color: #94a3b8;
            border-bottom: 1px solid #334155;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .editor-textarea {
            width: 100%;
            height: 180px;
            background: #1e293b;
            color: #f8fafc;
            padding: 1rem;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            border: none;
            outline: none;
            resize: none;
            line-height: 1.5;
            position: relative;
            z-index: 20;
        }

        .editor-textarea:focus {
            box-shadow: inset 0 0 0 1px #6366f1;
        }

        .output-area {
            background: #0f172a;
            color: #a5b4fc;
            padding: 0.75rem;
            font-family: 'Courier New', monospace;
            font-size: 0.85rem;
            border-top: 1px solid #334155;
            min-height: 3rem;
            white-space: pre-wrap;
        }

        /* Drag and Drop */
        .drop-zone {
            transition: all 0.2s ease;
        }

        .drop-zone.drag-over {
            background-color: #e0e7ff;
            border-color: #6366f1;
            transform: scale(1.05);
        }

        .draggable-item {
            cursor: grab;
            user-select: none;
        }

        .draggable-item:active {
            cursor: grabbing;
        }

        /* Animation Classes */
        .success-pop {
            animation: pop 0.3s ease-out;
        }

        @keyframes pop {
            50% {
                transform: scale(1.1);
            }
        }

        /* ====== NEW: MICRO-INTERACTIVES (non-invasive) ====== */
        .hint-box {
            display: none;
        }

        .hint-box.active {
            display: block;
            animation: fadeIn 0.2s;
        }

        .badge {
            border: 1px solid #e2e8f0;
            background: #f1f5f9;
            color: #64748b;
        }

        .badge.ok {
            border-color: #22c55e;
            color: #15803d;
            background: #dcfce7;
        }

        .badge.warn {
            border-color: #f59e0b;
            color: #b45309;
            background: #fef3c7;
        }

        .badge.err {
            border-color: #ef4444;
            color: #b91c1c;
            background: #fee2e2;
        }

        .micro {
            font-size: 11px;
        }

        .pill {
            border: 1px solid #e2e8f0;
            background: #fff;
            color: #475569;
        }

        .toast {
            display: none;
        }

        .toast.show {
            display: block;
            animation: fadeIn .2s;
        }

        .mini-card {
            background: #fff;
            border: 1px solid #e2e8f0;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
        }

        .choice-btn {
            transition: transform .08s ease;
        }

        .choice-btn:active {
            transform: scale(.98);
        }

        /* ===== FIX: Slide 16 Variable Scope (dark background readability) ===== */
        .scope-slide h2,
        .scope-slide h3 {
            color: #f8fafc !important; /* Slate-50 */
        }

        .scope-slide p {
            color: #e2e8f0 !important; /* Slate-200 */
        }
    </style>

    <!-- Python Controller Script -->
    <script type="py" config='{"packages":[]}'>
        from pyscript import document
        from pyodide.ffi.wrappers import add_event_listener
        import sys
        from io import StringIO

        def handle_click(event):
            # 1. Input Validation (Before touching stdout)
            el = event.target
            if not hasattr(el, "getAttribute"): return
            
            action = el.getAttribute("data-action")
            if not action: return

            code_id = el.getAttribute("data-code")
            out_id = el.getAttribute("data-out")
            fb_id = el.getAttribute("data-fb")
            if not code_id: return

            # 2. Setup Elements
            code_el = document.getElementById(code_id)
            out_el = document.getElementById(out_id)
            fb_el = document.getElementById(fb_id)
            code_val = code_el.value
            
            out_el.innerText = "Running..."
            fb_el.classList.add("hidden")

            # 3. Capture Output (Safe Block)
            capture = StringIO()
            old_stdout = sys.stdout
            sys.stdout = capture
            
            try:
                scope = {}
                exec(code_val, scope)
                result = capture.getvalue().strip()
                out_el.innerText = result if result else "[No Output]"
                
                if action == "check":
                    expect = el.getAttribute("data-expect")
                    kws = el.getAttribute("data-kws")
                    test = el.getAttribute("data-test")
                    passed = True
                    reasons = []
                    
                    if kws:
                        for k in kws.split(","):
                            k_clean = k.strip()
                            if k_clean and k_clean not in code_val:
                                passed = False; reasons.append(f"Missing keyword: '{k_clean}'")
                    
                    if expect and passed:
                        if expect.lower() not in result.lower():
                            passed = False; reasons.append(f"Output must contain: '{expect}'")
                    
                    if test and passed:
                        try: exec(test, scope)
                        except AssertionError: passed = False; reasons.append("Logic Verification Failed")
                        except Exception as e: passed = False; reasons.append(f"Logic Error: {str(e)}")

                    if passed:
                        fb_el.innerText = "‚úÖ Excellent! Code Verified."; fb_el.className = "mt-2 text-sm font-bold text-green-400 block success-pop"
                    else:
                        fb_el.innerText = "‚ùå " + "; ".join(reasons); fb_el.className = "mt-2 text-sm font-bold text-red-400 block"
                        
            except SyntaxError as e:
                out_el.innerText = f"‚ö†Ô∏è Syntax Error on line {e.lineno}: {e.msg}"
                if action=="check": fb_el.innerText="‚ùå Fix syntax errors first."; fb_el.className="mt-2 text-sm font-bold text-red-400 block"
            except Exception as e:
                out_el.innerText = f"‚ö†Ô∏è Runtime Error: {str(e)}"
            finally: 
                sys.stdout = old_stdout

        add_event_listener(document.body, "click", handle_click)
    </script>
</head>

<body class="bg-slate-50 text-slate-800 font-sans selection:bg-indigo-500 selection:text-white">

    <!-- Access Overlay -->
    <!-- UPDATED: z-index set to 9999 to guarantee visibility above all inputs -->
    <div id="accessOverlay"
        class="fixed inset-0 z-[9999] flex items-center justify-center bg-black/50 backdrop-blur-sm">
        <div class="bg-white p-8 rounded-2xl border border-slate-200 w-full max-w-sm text-center shadow-2xl">
            <h2 class="text-2xl font-bold text-indigo-600 mb-2">SESSION 28</h2>
            <!-- Added autocomplete off to prevent browser interference -->
            <input id="accessCodeInput" type="text" autocomplete="off" placeholder="CODE..."
                class="w-full p-3 rounded-lg bg-slate-50 border border-slate-300 text-center font-mono text-slate-900 mb-4 uppercase focus:border-indigo-500 outline-none transition">
            <button id="accessBtn"
                class="w-full py-3 bg-indigo-600 text-white rounded-lg font-bold hover:bg-indigo-500 active:scale-95 transition">UNLOCK</button>
            <p id="accessError" class="text-red-500 text-xs mt-2 hidden">INVALID CODE</p>
        </div>
    </div>

    <!-- Header -->
    <header class="sticky top-0 z-30 bg-white/90 backdrop-blur border-b border-slate-200">
        <div class="max-w-6xl mx-auto px-4 py-2 flex items-center justify-between">
            <div class="flex items-center gap-3">
                <div class="bg-indigo-600 text-white w-8 h-8 rounded-lg grid place-items-center font-bold">28</div>
                <div>
                    <div class="font-bold text-sm text-slate-900">Advanced Functions</div>
                    <div class="text-[10px] text-slate-500">Inputs ‚Ä¢ Returns ‚Ä¢ Architecture</div>
                </div>
            </div>
            <div class="flex items-center gap-2">
                <span id="slideIndicator" class="text-xs font-mono text-slate-500">1/33</span>
                <button id="btnPrev"
                    class="px-3 py-1 rounded border border-slate-300 hover:bg-slate-100 text-xs text-slate-600">PREV</button>
                <button id="btnNext"
                    class="px-3 py-1 rounded bg-indigo-600 hover:bg-indigo-500 text-white text-xs">NEXT</button>
            </div>
        </div>
    </header>

    <main class="max-w-4xl mx-auto px-4 py-8 mb-20">
        <div class="fixed top-[52px] left-0 w-full h-1 bg-slate-200 z-20">
            <div id="bar" class="h-full bg-indigo-500 transition-all duration-300" style="width: 0%"></div>
        </div>

        <!-- LEVEL 1: FOUNDATION -->
        <section class="slide active">
            <div class="text-center py-16">
                <h1 class="text-6xl font-black text-slate-900 mb-4 tracking-tighter">FUNCTION MASTERY</h1>
                <p class="text-xl text-slate-500 max-w-xl mx-auto mb-8">Move beyond valid syntax. Write code that is
                    reusable, modular, and professional.</p>
                <div class="flex justify-center gap-2 text-xs font-mono">
                    <span
                        class="bg-slate-100 border border-slate-200 px-3 py-1 rounded text-green-600">Multi-Param</span>
                    <span class="bg-slate-100 border border-slate-200 px-3 py-1 rounded text-blue-600">Return</span>
                    <span class="bg-slate-100 border border-slate-200 px-3 py-1 rounded text-orange-600">Scope</span>
                </div>

                <!-- NEW: objective chips -->
                <div class="mt-8 grid gap-2 max-w-2xl mx-auto">
                    <div class="mini-card rounded-xl p-4 text-left">
                        <div class="text-xs text-slate-500 mb-1">üéØ Objective hari ini</div>
                        <ul class="text-sm text-slate-700 list-disc ml-5 space-y-1">
                            <li>Membuat fungsi dengan beberapa parameter input.</li>
                            <li>Menggunakan <b>return</b> untuk proses data lanjutan.</li>
                            <li>Membedakan kapan pakai <b>return</b> vs hanya <b>print()</b>.</li>
                            <li>Mengintegrasikan fungsi dalam struktur program yang lebih besar.</li>
                        </ul>
                    </div>
                    <div class="mini-card rounded-xl p-4 text-left">
                        <div class="text-xs text-slate-400 mb-2">üß© Cara main</div>
                        <div class="grid md:grid-cols-3 gap-2 text-xs">
                            <div class="pill rounded-lg px-3 py-2">1) Kerjakan Task ‚Üí klik <b>RUN</b></div>
                            <div class="pill rounded-lg px-3 py-2">2) Cocokkan Target ‚Üí klik <b>CHECK</b></div>
                            <div class="pill rounded-lg px-3 py-2">3) Jika macet ‚Üí pakai <b>Hint 1‚Äì3</b></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Slide 2: Review -->
        <section class="slide">
            <h2 class="text-2xl font-bold mb-6 text-indigo-600">#1 Review: Anatomy</h2>
            <p class="text-xs text-slate-500 mb-3">Aktivitas: klik chip di bawah, lalu baca penjelasannya satu-satu.</p>

            <!-- NEW: tap to reveal -->
            <div class="mini-card rounded-xl p-4 mb-4">
                <div class="text-xs text-slate-500 mb-2">Klik bagian kode untuk lihat contoh cepat üëá</div>
                <div class="flex flex-wrap gap-2 text-xs">
                    <button class="pill rounded-lg px-3 py-2"
                        onclick="reveal('aDef','def = keyword wajib untuk membuat fungsi')">def</button>
                    <button class="pill rounded-lg px-3 py-2"
                        onclick="reveal('aParam','params = input. Bisa 1 atau banyak (multi-params)')">params</button>
                    <button class="pill rounded-lg px-3 py-2"
                        onclick="reveal('aRet','return = output. BISA disimpan ke variabel untuk langkah berikutnya')">return</button>
                    <button class="pill rounded-lg px-3 py-2"
                        onclick="reveal('aInd','indent = 4 spasi. Blok fungsi harus rapi')">indent</button>
                </div>
                <div id="aDef" class="toast mt-3 text-xs text-slate-700"></div>
                <div id="aParam" class="toast mt-2 text-xs text-slate-700"></div>
                <div id="aRet" class="toast mt-2 text-xs text-slate-700"></div>
                <div id="aInd" class="toast mt-2 text-xs text-slate-700"></div>
            </div>

            <div class="font-mono text-lg bg-slate-900 text-slate-200 p-6 rounded-xl border-l-4 border-indigo-500">
                <span class="text-purple-400">def</span> func_name(<span class="text-orange-400">params</span>):<br>
                &nbsp;&nbsp;<span class="text-slate-500"># logic block</span><br>
                &nbsp;&nbsp;<span class="text-purple-400">return</span> output
            </div>
            <ul class="mt-6 space-y-2 text-sm text-slate-700 list-disc ml-5">
                <li><b>def</b>: Keyword wajib.</li>
                <li><b>params</b>: Input (Variable).</li>
                <li><b>return</b>: Output (Data).</li>
                <li><b>indent</b>: 4 spasi / tab.</li>
            </ul>
        </section>

        <!-- Slide 3: Concept Multiple Params -->
        <section class="slide">
            <h2 class="text-2xl font-bold mb-6">#2 Multiple Parameters</h2>
            <p class="mb-4">Fungsi powerful membutuhkan >1 input untuk processing.</p>
            <p class="text-xs text-slate-500 mb-3">Aktivitas: klik pilihan yang benar. Yang benar punya banyak input.
            </p>

            <!-- NEW: mini challenge spot the missing -->
            <div class="mini-card rounded-xl p-4 mb-6">
                <div class="text-xs text-slate-500 mb-2">Mini Challenge: Mana yang lebih fleksibel?</div>
                <div class="grid md:grid-cols-3 gap-2 text-sm">
                    <button
                        class="choice-btn bg-slate-100 border border-slate-200 text-slate-700 rounded-lg p-3 hover:bg-red-500/10"
                        onclick="mc('mc1','‚ùå Ini kurang fleksibel karena cuma 1 input. Susah buat variasi.')">def
                        jus(buah):</button>
                    <button
                        class="choice-btn bg-slate-100 border border-slate-200 text-slate-700 rounded-lg p-3 hover:bg-indigo-500/10"
                        onclick="mc('mc1','‚úÖ Betul! Multi-params bikin fungsi bisa menangani banyak variasi input.')">def
                        jus(buah, gula, size):</button>
                    <div class="bg-slate-50 border border-slate-200 rounded-lg p-3 text-xs text-slate-500">Hint: cari
                        yang bisa beda buah + beda gula + beda ukuran.</div>
                </div>
                <div id="mc1" class="mt-3 text-sm font-semibold text-slate-700"></div>
            </div>

            <div class="grid grid-cols-2 gap-4 code-font text-sm">
                <div class="bg-slate-100 p-4 rounded border border-slate-200 text-slate-600">
                    <div class="text-red-500 font-bold mb-2">‚ùå Limited</div>
                    def jus(buah):
                </div>
                <div class="bg-indigo-50 p-4 rounded border border-indigo-200 text-indigo-900">
                    <div class="text-green-600 font-bold mb-2">‚úÖ Flexible</div>
                    def jus(buah, gula, size):
                </div>
            </div>
        </section>

        <!-- Slide 4: Blender Interaction -->
        <section class="slide">
            <h2 class="text-xl font-bold mb-4 text-slate-900">Activity: Parameter Mixing</h2>
            <p class="text-xs text-slate-500 mb-4">Visualisasi input parameters.</p>
            <p class="text-xs text-slate-500 mb-4">Aktivitas: seret 2 item ke slot. Lihat contoh pemanggilan fungsi di
                bawah.</p>
            <div class="bg-white p-6 rounded-xl border border-slate-200 shadow-sm">
                <div class="flex justify-center gap-2 mb-6">
                    <div class="draggable-item bg-red-100 text-red-700 border border-red-200 px-3 py-1 rounded text-xs font-bold"
                        draggable="true">üçì Berry</div>
                    <div class="draggable-item bg-yellow-100 text-yellow-700 border border-yellow-200 px-3 py-1 rounded text-xs font-bold"
                        draggable="true">üçå Banana</div>
                    <div class="draggable-item bg-blue-100 text-blue-700 border border-blue-200 px-3 py-1 rounded text-xs font-bold"
                        draggable="true">ü•õ Milk</div>
                </div>
                <div
                    class="flex items-center justify-center gap-2 font-mono text-xs bg-slate-50 p-4 rounded-lg border border-slate-200 text-slate-600">
                    func(<div
                        class="drop-zone w-16 h-8 border border-dashed border-slate-400 flex items-center justify-center rounded bg-slate-100 text-slate-500"
                        data-slot="1"></div>,
                    <div class="drop-zone w-16 h-8 border border-dashed border-slate-400 flex items-center justify-center rounded bg-slate-100 text-slate-500"
                        data-slot="2"></div>)
                </div>

                <!-- NEW: auto-call + feedback -->
                <div class="mt-4 grid gap-2">
                    <div class="pill rounded-lg p-3 text-xs font-mono bg-slate-50 border-slate-200">
                        Generated Call: <span id="callPreview" class="text-indigo-600 font-bold">func(?, ?)</span>
                    </div>
                    <div id="blendOut" class="h-8 text-center text-indigo-600 font-bold text-sm"></div>
                    <div id="blendTip" class="text-center text-xs text-slate-500"></div>
                </div>
            </div>
            <script>
                    (function () {
                        const dz = document.querySelectorAll('.drop-zone');
                        const di = document.querySelectorAll('.draggable-item');
                        di.forEach(d => {
                            d.addEventListener('dragstart', e => {
                                const text = e.target.innerText;
                                e.dataTransfer.setData('text/plain', text);
                                e.dataTransfer.setData('t', text);
                            });
                        });
                        dz.forEach(z => {
                            z.addEventListener('dragover', e => { e.preventDefault(); z.classList.add('drag-over'); });
                            z.addEventListener('dragleave', () => z.classList.remove('drag-over'));
                            z.addEventListener('drop', e => {
                                e.preventDefault();
                                z.classList.remove('drag-over');
                                const t = e.dataTransfer.getData('text/plain') || e.dataTransfer.getData('t');
                                z.innerText = t;
                                z.classList.add('bg-indigo-100', 'text-indigo-700', 'border-indigo-300');
                                const a = dz[0].innerText, b = dz[1].innerText;
                                const preview = document.getElementById('callPreview');
                                preview.innerText = `func("${a || '?'}", "${b || '?'}")`;
                                if (a && b) {
                                    document.getElementById('blendOut').innerText = `Mixing ${a} + ${b}...`;
                                    document.getElementById('blendTip').innerText = '‚úÖ Dua parameter sudah terisi. Ini contoh pemanggilan fungsi dengan 2 input.';
                                } else {
                                    document.getElementById('blendTip').innerText = 'Isi kedua slot supaya fungsinya punya input lengkap.';
                                }
                            });
                        });
                    })();
            </script>
        </section>

        <!-- Slide 5: Exercise 1 -->
        <section class="slide">
            <h2 class="text-xl font-bold mb-2 text-slate-900">Code Task 1: Basic Params</h2>
            <p class="text-xs text-slate-500 mb-3">Tugas: panggil fungsi <b>login</b> dengan username dan password yang
                diminta.</p>
            <p class="text-xs text-slate-500 mb-3">Gunakan: username <b>"admin"</b> dan password <b>"1234"</b>.</p>

            <!-- NEW: Target + Hints -->
            <div class="mb-3 flex flex-wrap items-center gap-2">
                <div class="badge micro px-3 py-1 rounded-lg flex items-center gap-2" data-target-out="o1"
                    data-target-contains="User admin" data-target-code="c1" data-target-kws="login(">
                    <span class="status">üéØ Target: output memuat "User admin"</span>
                </div>
                <div class="flex gap-2">
                    <button data-hint-btn data-hint-wrap="hints-c1" data-hint-level="1"
                        class="px-3 py-1 rounded border border-slate-700 hover:bg-slate-800 text-xs">Hint 1</button>
                    <button data-hint-btn data-hint-wrap="hints-c1" data-hint-level="2"
                        class="px-3 py-1 rounded border border-slate-700 hover:bg-slate-800 text-xs">Hint 2</button>
                    <button data-hint-btn data-hint-wrap="hints-c1" data-hint-level="3"
                        class="px-3 py-1 rounded border border-slate-700 hover:bg-slate-800 text-xs">Hint 3</button>
                </div>
            </div>
            <div id="hints-c1" class="mb-3">
                <div class="hint-box" data-hint="1">
                    <div class="mini-card rounded-lg p-3 text-xs text-slate-600">üí° Kamu perlu <b>memanggil</b> fungsi:
                        <code class="text-indigo-600 bg-indigo-50 px-1 rounded">login(...)</code>
                    </div>
                </div>
                <div class="hint-box" data-hint="2">
                    <div class="mini-card rounded-lg p-3 text-xs text-slate-600">üí° Pakai input: username <code
                            class="text-indigo-600 bg-indigo-50 px-1 rounded">"admin"</code> dan password <code
                            class="text-indigo-600 bg-indigo-50 px-1 rounded">"1234"</code></div>
                </div>
                <div class="hint-box" data-hint="3">
                    <div class="mini-card rounded-lg p-3 text-xs text-slate-600">‚úÖ Contoh: <code
                            class="text-indigo-600 bg-indigo-50 px-1 rounded">login("admin","1234")</code></div>
                </div>
            </div>

            <div class="editor-container">
                <div class="editor-header"><span>ex1.py</span></div>
                <textarea id="c1" class="editor-textarea">

def login(username, password):
    print(f"User {username} attempt login...")

</textarea>
            </div>
            <div class="mt-2 flex gap-2">
                <button data-action="run" data-code="c1" data-out="o1" data-fb="f1"
                    class="px-4 py-2 bg-indigo-600 rounded text-sm font-bold">‚ñ∂ RUN</button>
                <button data-action="check" data-code="c1" data-out="o1" data-fb="f1" data-expect="User admin"
                    data-kws="login" class="px-4 py-2 bg-emerald-600 rounded text-sm font-bold">‚úì CHECK</button>
            </div>
            <div id="o1" class="output-area mt-2 rounded"></div>
            <div id="f1" class="hidden"></div>
        </section>

        <!-- Slide 6: Return vs Print -->
        <section class="slide">
            <h2 class="text-2xl font-bold mb-6 text-slate-900">#3 Return vs Print</h2>
            <div class="grid grid-cols-2 gap-6">
                <div class="p-6 bg-white border border-slate-200 rounded-xl shadow-sm">
                    <h3 class="font-bold text-red-500 mb-2">Print (Display)</h3>
                    <p class="text-xs text-slate-500">Hanya menampilkan teks ke layar. Data <b>HILANG</b> setelah
                        tampil. Tidak bisa disimpan ke variabel.</p>
                </div>
                <div class="p-6 bg-indigo-50 rounded-xl border border-indigo-200">
                    <h3 class="font-bold text-indigo-700 mb-2">Return (Data)</h3>
                    <p class="text-xs text-slate-600">Mengembalikan data ke pemanggil. Data <b>BISA</b> disimpan,
                        diolah, atau dihitung ulang.</p>
                </div>
            </div>

            <!-- NEW: Decision Cards -->
            <div class="mini-card rounded-xl p-4 mt-6">
                <div class="text-xs text-slate-500 mb-2">Aktivitas: klik pilihan yang benar (print atau return).</div>
                <div class="grid md:grid-cols-3 gap-3 text-sm">
                    <button
                        class="choice-btn bg-white border border-slate-200 text-slate-700 rounded-lg p-3 hover:bg-slate-50"
                        onclick="decide('d1','return','‚úÖ Betul. Nilai mau dipakai lagi, jadi harus return.')">Hitung HP
                        untuk battle logic berikutnya</button>
                    <button
                        class="choice-btn bg-white border border-slate-200 text-slate-700 rounded-lg p-3 hover:bg-slate-50"
                        onclick="decide('d1','print','‚úÖ Betul. Ini sekadar tampilkan pesan ke user, print cukup.')">Tampilkan
                        "Welcome" saat program mulai</button>
                    <button
                        class="choice-btn bg-white border border-slate-200 text-slate-700 rounded-lg p-3 hover:bg-slate-50"
                        onclick="decide('d1','return','‚úÖ Betul. Nilai luas dipakai untuk perhitungan lain.')">Hitung
                        luas lalu dipakai cek biaya</button>
                </div>
                <div id="d1" class="mt-3 text-sm font-semibold text-slate-700"></div>
            </div>
        </section>

        <!-- Slide 7: Visualizing Flow -->
        <section class="slide">
            <h2 class="text-xl font-bold mb-4 text-slate-900">Visual Comparison</h2>
            <p class="text-sm text-slate-600 mb-4">Activity ini membandingkan alur data saat fungsi memakai <b>print</b>
                vs <b>return</b>. Fokusnya: apakah data bisa disimpan ke variabel untuk dipakai lagi.</p>
            <div class="mini-card rounded-xl p-4 mb-4">
                <div class="text-xs text-slate-500 mb-2">Contoh syntax (lihat bedanya)</div>
                <div class="grid md:grid-cols-2 gap-3 text-xs font-mono">
                    <div class="bg-slate-50 border border-slate-200 p-3 rounded text-slate-700">
                        <div class="text-red-500 mb-1 font-bold">Print (tidak bisa disimpan)</div>
                        def tambah(a, b):<br>
                        &nbsp;&nbsp;print(a + b)
                    </div>
                    <div class="bg-slate-50 border border-slate-200 p-3 rounded text-slate-700">
                        <div class="text-emerald-600 mb-1 font-bold">Return (bisa disimpan)</div>
                        def tambah(a, b):<br>
                        &nbsp;&nbsp;return a + b
                    </div>
                </div>
            </div>
            <div class="mini-card rounded-xl p-4 mb-4">
                <div class="text-xs text-slate-500 mb-2">Cara main (30 detik)</div>
                <div class="grid md:grid-cols-3 gap-2 text-xs">
                    <div class="pill rounded-lg px-3 py-2 bg-white border border-slate-200 text-slate-600">1) Klik
                        <b>Test Print</b> ‚Üí lihat data ‚Äúterbang‚Äù
                    </div>
                    <div class="pill rounded-lg px-3 py-2 bg-white border border-slate-200 text-slate-600">2) Klik
                        <b>Test Return</b> ‚Üí data masuk ke <b>UserVar</b>
                    </div>
                    <div class="pill rounded-lg px-3 py-2 bg-white border border-slate-200 text-slate-600">3) Klik
                        <b>Reset</b> ‚Üí ulangi dan bandingkan
                    </div>
                </div>
            </div>
            <div class="flex gap-4 mb-4">
                <button onclick="sim('p')"
                    class="bg-slate-200 hover:bg-slate-300 text-slate-700 px-4 py-2 rounded text-xs uppercase font-bold transition">Test
                    Print</button>
                <button onclick="sim('r')"
                    class="bg-indigo-600 hover:bg-indigo-500 text-white px-4 py-2 rounded text-xs uppercase font-bold transition">Test
                    Return</button>
                <button onclick="resetSim()"
                    class="bg-white border border-slate-300 hover:bg-slate-50 text-slate-700 px-4 py-2 rounded text-xs uppercase font-bold transition">Reset</button>
            </div>
            <div class="relative h-32 bg-slate-50 rounded border border-slate-200 overflow-hidden shadow-inner">
                <div
                    class="absolute top-10 left-4 bg-blue-100 text-blue-700 border border-blue-200 px-2 py-1 rounded text-xs font-bold">
                    Func</div>
                <div id="uVar"
                    class="absolute top-10 right-4 bg-slate-100 border border-slate-200 text-slate-500 px-2 py-1 rounded text-xs transition font-mono box-border">
                    UserVar = ?</div>
                <div id="pkg"
                    class="absolute top-11 left-14 w-2 h-2 bg-amber-400 rounded-full opacity-0 shadow-sm border border-amber-600">
                </div>
            </div>
            <div class="mt-3 text-xs text-slate-500" id="simExplain">Klik tombol untuk lihat alur data.</div>
            <script>
                function sim(t) {
                    const p = document.getElementById('pkg');
                    const v = document.getElementById('uVar');
                    const exp = document.getElementById('simExplain');
                    v.innerText = "UserVar = ?"; v.classList.remove('bg-green-600');
                    p.style.transition = 'none'; p.style.left = '60px'; p.style.top = '44px'; p.style.opacity = '1';
                    setTimeout(() => {
                        p.style.transition = 'all 0.8s ease';
                        if (t == 'p') {
                            p.style.top = '-20px'; p.style.opacity = '0';
                            exp.innerText = 'Print hanya menampilkan ‚Äî data ‚Äúterbang‚Äù dan tidak tersimpan ke variabel.';
                        }
                        else {
                            p.style.left = '90%';
                            setTimeout(() => { p.style.opacity = 0; v.innerText = "UserVar = DATA"; v.classList.add('bg-emerald-100', 'text-emerald-700', 'border-emerald-300'); }, 800);
                            exp.innerText = 'Return mengirim data kembali ‚Äî variabel bisa menyimpan dan dipakai lagi.';
                        }
                    }, 50);
                }
                function resetSim() {
                    const p = document.getElementById('pkg');
                    const v = document.getElementById('uVar');
                    document.getElementById('simExplain').innerText = 'Klik tombol untuk lihat alur data.';
                    v.innerText = 'UserVar = ?'; v.classList.remove('bg-emerald-100', 'text-emerald-700', 'border-emerald-300');
                    p.style.opacity = 0;
                }
            </script>
        </section>

        <!-- Slide 8: Why Return -->
        <section class="slide">
            <h2 class="text-2xl font-bold mb-6 text-slate-900">The "Chain" Power</h2>
            <p class="mb-4 text-slate-700">Return memungkinkan <b>Function Chaining</b> (Estafet Data).</p>
            <p class="text-xs text-slate-500 mb-4">Aktivitas: klik Run Chain untuk melihat data berpindah antar fungsi.
            </p>
            <div class="bg-white border border-slate-200 p-4 rounded-xl font-mono text-sm text-slate-600 shadow-sm">
                raw = get_input()<br>
                clean = sanitizer(raw)<br>
                save_database(clean)
            </div>
            <div class="mt-4 p-4 bg-red-50 text-red-700 text-xs rounded border border-red-200">
                ‚ö†Ô∏è Jika pakai print, variabel `clean` akan berisi <b>None</b>, dan program crash.
            </div>

            <!-- NEW: chain simulator -->
            <div class="mini-card rounded-xl p-4 mt-6">
                <div class="flex items-center justify-between gap-2">
                    <div>
                        <div class="text-xs text-slate-500">Simulasi chaining</div>
                        <div class="text-sm font-semibold text-slate-800">Klik untuk lihat "data estafet"</div>
                    </div>
                    <button
                        class="px-4 py-2 bg-indigo-600 active:bg-indigo-700 text-white rounded text-xs font-bold uppercase transition"
                        onclick="runChain()">Run Chain</button>
                </div>
                <div class="mt-4 grid md:grid-cols-3 gap-2 text-xs font-mono">
                    <div class="pill rounded-lg p-3 bg-slate-50 border-slate-200 text-slate-600">raw = <span id="chRaw"
                            class="text-slate-400">?</span></div>
                    <div class="pill rounded-lg p-3 bg-slate-50 border-slate-200 text-slate-600">clean = <span
                            id="chClean" class="text-slate-400">?</span></div>
                    <div class="pill rounded-lg p-3 bg-slate-50 border-slate-200 text-slate-600">saved = <span
                            id="chSave" class="text-slate-400">?</span></div>
                </div>
                <div id="chMsg" class="mt-3 text-sm text-slate-500"></div>
            </div>
        </section>

        <!-- Slide 9: Exercise 2 -->
        <section class="slide">
            <h2 class="text-xl font-bold mb-2">Code Task 2: Fix the Return</h2>
            <p class="text-xs text-slate-400 mb-3">Penjelasan: <b>return</b> itu mengembalikan nilai dari fungsi supaya
                bisa disimpan ke variabel.</p>
            <p class="text-xs text-slate-400 mb-3">Tugas: ganti <b>print(hasil)</b> menjadi <b>return hasil</b> agar
                variabel <b>area</b> berisi angka.</p>

            <!-- NEW: Target + Hints -->
            <div class="mb-3 flex flex-wrap items-center gap-2">
                <div class="badge micro px-3 py-1 rounded-lg flex items-center gap-2" data-target-out="o2"
                    data-target-contains="Success" data-target-code="c2" data-target-kws="return">
                    <span class="status">üéØ Target: muncul "‚úÖ Success"</span>
                </div>
                <div class="flex gap-2">
                    <button data-hint-btn data-hint-wrap="hints-c2" data-hint-level="1"
                        class="px-3 py-1 rounded border border-slate-300 hover:bg-slate-100 text-slate-600 text-xs shadow-sm">Hint
                        1</button>
                    <button data-hint-btn data-hint-wrap="hints-c2" data-hint-level="2"
                        class="px-3 py-1 rounded border border-slate-300 hover:bg-slate-100 text-slate-600 text-xs shadow-sm">Hint
                        2</button>
                    <button data-hint-btn data-hint-wrap="hints-c2" data-hint-level="3"
                        class="px-3 py-1 rounded border border-slate-300 hover:bg-slate-100 text-slate-600 text-xs shadow-sm">Hint
                        3</button>
                </div>
            </div>
            <div id="hints-c2" class="mb-3">
                <div class="hint-box" data-hint="1">
                    <div class="mini-card rounded-lg p-3 text-xs text-slate-600">üí° Variabel <code
                            class="text-indigo-600 bg-indigo-50 px-1 rounded">area</code> perlu dapat nilai dari fungsi.
                    </div>
                </div>
                <div class="hint-box" data-hint="2">
                    <div class="mini-card rounded-lg p-3 text-xs text-slate-600">üí° <b>print</b> hanya tampilkan, tapi
                        <b>return</b> mengembalikan nilai.
                    </div>
                </div>
                <div class="hint-box" data-hint="3">
                    <div class="mini-card rounded-lg p-3 text-xs text-slate-600">‚úÖ Ganti baris terakhir jadi: <code
                            class="text-indigo-600 bg-indigo-50 px-1 rounded">return hasil</code></div>
                </div>
            </div>

            <div class="editor-container">
                <div class="editor-header"><span>ex2.py</span></div>
                <textarea id="c2" class="editor-textarea">

def luas_persegi(sisi):
    hasil = sisi * sisi
    print(hasil)

area = luas_persegi(10)
if area == 100: print("‚úÖ Success")
else: print(f"‚ùå Failed. Got: {area}")</textarea>
            </div>
            <div class="mt-2 flex gap-2">
                <button data-action="run" data-code="c2" data-out="o2" data-fb="f2"
                    class="px-4 py-2 bg-indigo-600 rounded text-sm font-bold">‚ñ∂ RUN</button>
                <button data-action="check" data-code="c2" data-out="o2" data-fb="f2" data-expect="Success"
                    data-kws="return" class="px-4 py-2 bg-emerald-600 rounded text-sm font-bold">‚úì CHECK</button>
            </div>
            <div id="o2" class="output-area mt-2 rounded"></div>
            <div id="f2" class="hidden"></div>
        </section>

        <!-- Slide 10: Quiz 1 -->
        <section class="slide">
            <div class="text-center py-10">
                <h3 class="text-2xl font-bold mb-8">Checkpoint Alpha</h3>
                <p class="text-xs text-slate-400 mb-3">Aktivitas: klik jawaban yang benar.</p>
                <p class="mb-6 text-slate-400">Function calculating User HP. Need to use HP for further battle logic.
                    Use print or return?</p>
                <div class="flex justify-center gap-4">
                    <button
                        class="bg-slate-800 border border-slate-600 px-8 py-4 rounded text-xl font-bold hover:bg-red-900 transition"
                        onclick="document.getElementById('cpAfb').classList.remove('hidden'); document.getElementById('cpAfb').innerText='‚ùå Print hanya menampilkan. HP harus dipakai lagi untuk battle logic, jadi butuh RETURN agar nilainya bisa disimpan ke variabel.';">
                        Print
                    </button>
                    <button class="bg-indigo-600 px-8 py-4 rounded text-xl font-bold hover:bg-indigo-500 transition"
                        onclick="showSlide(10)">Return</button>
                </div>
                <p id="cpAfb" class="mt-6 text-sm text-slate-200 hidden"></p>
            </div>
        </section>

        <!-- LEVEL 2: FLEXIBILITY -->
        <section class="slide">
            <div class="pt-20 text-center">
                <div
                    class="text-6xl mb-4 font-black text-transparent bg-clip-text bg-gradient-to-r from-teal-400 to-blue-500">
                    LEVEL 2</div>
                <h2 class="text-3xl text-white font-bold">Flexibility & Logic Controls</h2>
                <div class="mt-8 grid grid-cols-2 gap-4 max-w-lg mx-auto text-sm">
                    <div class="bg-slate-800 p-3 rounded">Default Arguments</div>
                    <div class="bg-slate-800 p-3 rounded">Keyword Arguments</div>
                    <div class="bg-slate-800 p-3 rounded">Guard Clauses</div>
                    <div class="bg-slate-800 p-3 rounded">Variable Scope</div>
                </div>

                <!-- NEW: micro goal -->
                <div class="mini-card rounded-xl p-4 mt-8 max-w-2xl mx-auto text-left">
                    <div class="text-xs text-slate-500 mb-2">üéØ Goal level 2</div>
                    <div class="text-sm text-slate-800">Kamu akan membuat fungsi lebih <b>fleksibel</b>
                        (default/keyword) dan lebih <b>aman</b> (guard clause + scope).</div>
                </div>
            </div>
        </section>

        <!-- Slide 12: Defaults -->
        <section class="slide">
            <h2 class="text-2xl font-bold mb-6">#4 Default Arguments</h2>
            <p class="mb-4 text-slate-400">Parameter opsional dengan nilai standar ("Fallback").</p>
            <p class="text-xs text-slate-400 mb-4">Aktivitas: klik pemanggilan fungsi yang benar.</p>
            <div class="bg-slate-800 p-4 rounded border-l-4 border-yellow-500 font-mono text-sm">
                def connect(server, <span class="text-yellow-400">port=8080</span>):<br>
                &nbsp;&nbsp;...
            </div>
            <div class="mt-4 grid gap-2 text-sm font-mono text-slate-300">
                <div class="bg-black/50 p-2">connect("google.com") <span class="text-slate-500 text-xs">// port
                        8080</span></div>
                <div class="bg-black/30 p-2">connect("db", 3306) <span class="text-slate-500 text-xs">// port
                        3306</span></div>
            </div>

            <!-- NEW: quick interactive selector -->
            <div class="mini-card rounded-xl p-4 mt-6">
                <div class="text-xs text-slate-400 mb-2">Coba: pilih call yang benar</div>
                <div class="flex flex-wrap gap-2 text-xs font-mono">
                    <button class="pill rounded-lg px-3 py-2"
                        onclick="mc('defSel','‚úÖ Benar. Tanpa port berarti pakai default 8080.')">connect("google.com")</button>
                    <button class="pill rounded-lg px-3 py-2"
                        onclick="mc('defSel','‚úÖ Benar. Port diisi manual (override default).')">connect("db",
                        3306)</button>
                    <button class="pill rounded-lg px-3 py-2"
                        onclick="mc('defSel','‚ùå Ini kebalik. Port seharusnya angka, bukan string server.')">connect(8080,
                        "google.com")</button>
                </div>
                <div id="defSel" class="mt-3 text-sm font-semibold"></div>
            </div>
        </section>

        <!-- Slide 13: Exercise 3 -->
        <section class="slide">
            <h2 class="text-xl font-bold mb-2">Code Task 3: Defaults</h2>
            <p class="text-xs text-slate-400 mb-3">Tugas: ubah parameter <b>mode</b> agar default-nya "Easy".</p>

            <!-- NEW: Target + Hints -->
            <div class="mb-3 flex flex-wrap items-center gap-2">
                <div class="badge micro px-3 py-1 rounded-lg flex items-center gap-2" data-target-out="o3"
                    data-target-contains="Ali playing Easy" data-target-code="c3" data-target-kws="mode=\" Easy\"">
                    <span class="status">üéØ Target: output pertama "Ali playing Easy"</span>
                </div>
                <div class="flex gap-2">
                    <button data-hint-btn data-hint-wrap="hints-c3" data-hint-level="1"
                        class="px-3 py-1 rounded border border-slate-700 hover:bg-slate-800 text-xs">Hint 1</button>
                    <button data-hint-btn data-hint-wrap="hints-c3" data-hint-level="2"
                        class="px-3 py-1 rounded border border-slate-700 hover:bg-slate-800 text-xs">Hint 2</button>
                    <button data-hint-btn data-hint-wrap="hints-c3" data-hint-level="3"
                        class="px-3 py-1 rounded border border-slate-700 hover:bg-slate-800 text-xs">Hint 3</button>
                </div>
            </div>
            <div id="hints-c3" class="mb-3">
                <div class="hint-box" data-hint="1">
                    <div class="mini-card rounded-lg p-3 text-xs text-slate-300">üí° Default ditulis di <b>def</b>, bukan
                        di dalam fungsi.</div>
                </div>
                <div class="hint-box" data-hint="2">
                    <div class="mini-card rounded-lg p-3 text-xs text-slate-300">üí° Ubah parameter jadi <code
                            class="text-green-300">mode="Easy"</code></div>
                </div>
                <div class="hint-box" data-hint="3">
                    <div class="mini-card rounded-lg p-3 text-xs text-slate-300">‚úÖ Contoh: <code
                            class="text-green-300">def start_game(player, mode="Easy"):</code></div>
                </div>
            </div>

            <div class="editor-container">
                <div class="editor-header"><span>ex3.py</span></div>
                <textarea id="c3" class="editor-textarea">
def start_game(player, mode=None):
    return f"{player} playing {mode}"

print(start_game("Ali"))
print(start_game("Budi", "Hard"))</textarea>
            </div>
            <div class="mt-2 flex gap-2">
                <button data-action="run" data-code="c3" data-out="o3" data-fb="f3"
                    class="px-4 py-2 bg-indigo-600 rounded text-sm font-bold">‚ñ∂ RUN</button>
                <button data-action="check" data-code="c3" data-out="o3" data-fb="f3" data-expect="Ali playing Easy"
                    data-kws="mode=" class="px-4 py-2 bg-emerald-600 rounded text-sm font-bold">‚úì CHECK</button>
            </div>
            <div id="o3" class="output-area mt-2 rounded"></div>
            <div id="f3" class="hidden"></div>
        </section>

        <!-- Slide 14: Keywords -->
        <section class="slide">
            <h2 class="text-2xl font-bold mb-6">#5 Keyword Arguments</h2>
            <p class="mb-4">Explicit is better than implicit. Sebutkan nama parameter saat memanggil.</p>
            <p class="text-xs text-slate-400 mb-4">Aktivitas: klik versi yang lebih mudah dibaca.</p>
            <div class="bg-slate-800 p-6 rounded text-sm font-mono">
                <div class="text-red-400 mb-2">createUser("Budi", 20, True, "JKT") <span
                        class="text-xs text-slate-500">// Confusing</span></div>
                <div class="text-green-400">createUser(name="Budi", city="JKT", active=True, age=20)</div>
            </div>
            <p class="mt-4 text-xs text-slate-400">Benefit: Urutan tidak penting & kode lebih mudah dibaca.</p>

            <!-- NEW: reorder safe demo -->
            <div class="mini-card rounded-xl p-4 mt-6">
                <div class="text-xs text-slate-400 mb-2">Coba: mana yang lebih mudah dibaca?</div>
                <div class="grid md:grid-cols-2 gap-2 text-sm font-mono">
                    <button class="choice-btn bg-slate-800 border border-slate-700 rounded-lg p-3 hover:bg-red-900/30"
                        onclick="mc('kwFb','‚úÖ Betul. Ini membingungkan karena urutan harus hafal.')">createUser("Budi",
                        20, True, "JKT")</button>
                    <button
                        class="choice-btn bg-slate-800 border border-slate-700 rounded-lg p-3 hover:bg-indigo-900/30"
                        onclick="mc('kwFb','‚úÖ Betul. Keyword bikin jelas dan urutan jadi tidak masalah.')">createUser(name="Budi",
                        city="JKT", active=True, age=20)</button>
                </div>
                <div id="kwFb" class="mt-3 text-sm font-semibold"></div>
            </div>
        </section>

        <!-- Slide 15: Exercise 4 -->
        <section class="slide">
            <h2 class="text-xl font-bold mb-2">Code Task 4: Keywords</h2>
            <p class="text-xs text-slate-400 mb-3">Tugas: panggil fungsi dengan <b>keyword arguments</b> sesuai urutan
                yang benar.</p>
            <p class="text-xs text-slate-400 mb-3">Gunakan: wifi=True, bluetooth=False, nfc=True.</p>

            <!-- NEW: Target + Hints -->
            <div class="mb-3 flex flex-wrap items-center gap-2">
                <div class="badge micro px-3 py-1 rounded-lg flex items-center gap-2" data-target-out="o4"
                    data-target-contains="W:True B:False" data-target-code="c4" data-target-kws="wifi=,bluetooth=">
                    <span class="status">üéØ Target: output mulai dengan "W:True B:False"</span>
                </div>
                <div class="flex gap-2">
                    <button data-hint-btn data-hint-wrap="hints-c4" data-hint-level="1"
                        class="px-3 py-1 rounded border border-slate-700 hover:bg-slate-800 text-xs">Hint 1</button>
                    <button data-hint-btn data-hint-wrap="hints-c4" data-hint-level="2"
                        class="px-3 py-1 rounded border border-slate-700 hover:bg-slate-800 text-xs">Hint 2</button>
                    <button data-hint-btn data-hint-wrap="hints-c4" data-hint-level="3"
                        class="px-3 py-1 rounded border border-slate-700 hover:bg-slate-800 text-xs">Hint 3</button>
                </div>
            </div>
            <div id="hints-c4" class="mb-3">
                <div class="hint-box" data-hint="1">
                    <div class="mini-card rounded-lg p-3 text-xs text-slate-300">üí° Panggil fungsi dengan menyebut
                        <b>nama parameternya</b>.
                    </div>
                </div>
                <div class="hint-box" data-hint="2">
                    <div class="mini-card rounded-lg p-3 text-xs text-slate-300">üí° Format: <code
                            class="text-green-300">config(wifi=True, bluetooth=False, nfc=True)</code></div>
                </div>
                <div class="hint-box" data-hint="3">
                    <div class="mini-card rounded-lg p-3 text-xs text-slate-300">‚úÖ Pastikan value sesuai: wifi=True,
                        bluetooth=False, nfc=True</div>
                </div>
            </div>

            <div class="editor-container">
                <div class="editor-header"><span>ex4.py</span></div>
                <textarea id="c4" class="editor-textarea">

def config(wifi, bluetooth, nfc):
    return f"W:{wifi} B:{bluetooth} N:{nfc}"

print(config(wifi=True, bluetooth=False, nfc=True))</textarea>
            </div>
            <div class="mt-2 flex gap-2">
                <button data-action="run" data-code="c4" data-out="o4" data-fb="f4"
                    class="px-4 py-2 bg-indigo-600 rounded text-sm font-bold">‚ñ∂ RUN</button>
                <button data-action="check" data-code="c4" data-out="o4" data-fb="f4" data-expect="W:True B:False"
                    data-kws="wifi=,bluetooth=" class="px-4 py-2 bg-emerald-600 rounded text-sm font-bold">‚úì
                    CHECK</button>
            </div>
            <div id="o4" class="output-area mt-2 rounded"></div>
            <div id="f4" class="hidden"></div>
        </section>

        <!-- Slide 16: Scope -->
        <section class="slide scope-slide">
            <h2 class="text-2xl font-bold mb-6">#6 Variable Scope</h2>
            <div class="p-6 bg-slate-800 rounded border border-slate-700">
                <h3 class="font-bold text-orange-800 mb-2">Local Scope</h3>
                <p class="text-sm text-slate-300">Variabel yang dibuat DI DALAM fungsi, <b>MATI</b> saat fungsi selesai.
                    Tidak bisa diakses dari luar.</p>
            </div>
            <p class="text-xs text-slate-400 mt-4">Aktivitas: klik Inside/Outside untuk melihat mana yang bisa diakses.
            </p>
            <div class="mt-4 font-mono text-sm bg-black/30 p-4 rounded">
                def test():<br>
                &nbsp;&nbsp;<span class="text-green-400">x = 10</span> <span class="text-slate-500"># Local</span><br>
                <br>
                print(x) <span class="text-red-500"># Error: NameError</span>
            </div>

            <!-- NEW: scope toggle simulator -->
            <div class="mini-card rounded-xl p-4 mt-6">
                <div class="flex items-center justify-between gap-2">
                    <div>
                        <div class="text-xs text-slate-400">Scope Simulator</div>
                        <div class="text-sm font-semibold">Klik untuk lihat efek akses variabel</div>
                    </div>
                    <div class="flex gap-2">
                        <button class="px-3 py-2 text-xs rounded bg-indigo-600 font-bold"
                            onclick="scopeSim('inside')">Inside</button>
                        <button class="px-3 py-2 text-xs rounded border border-slate-700 hover:bg-slate-800 font-bold"
                            onclick="scopeSim('outside')">Outside</button>
                    </div>
                </div>
                <div class="mt-3 bg-black/30 border border-slate-700 rounded-lg p-3 font-mono text-xs">
                    <div id="scLine1" class="text-slate-300">secret = "ABC"</div>
                    <div id="scLine2" class="text-slate-300">print(secret)</div>
                    <div id="scOut" class="mt-2 text-indigo-300">Output: ?</div>
                </div>
            </div>
        </section>

        <!-- Slide 17: Scope Visual -->
        <section class="slide">
            <h2 class="text-xl font-bold mb-4 text-center">Implementation Detail</h2>
            <div
                class="relative h-64 bg-slate-800 rounded mx-auto w-3/4 border border-slate-600 shadow-xl overflow-hidden">
                <div
                    class="absolute inset-0 flex items-center justify-center text-[8rem] font-bold text-white/5 select-none">
                    GLOBAL</div>
                <div class="absolute inset-0 p-8 flex items-center justify-center">
                    <div
                        class="w-64 h-40 bg-indigo-900/50 backdrop-blur border border-indigo-400 rounded-xl relative flex items-center justify-center flex-col">
                        <div class="absolute -top-3 bg-indigo-500 text-white text-xs px-2 rounded">Function Scope</div>
                        <code class="text-green-400">local_var = 123</code>
                        <div class="text-[10px] text-indigo-300 mt-2">Invisible to Global</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Slide 18: Exercise 5 Scope -->
        <section class="slide">
            <h2 class="text-xl font-bold mb-2">Code Task 5: Fixing Scope</h2>
            <p class="text-xs text-slate-400 mb-3">Tugas: simpan hasil fungsi ke variabel <b>my_data</b>, lalu print.
            </p>

            <!-- NEW: Target + Hints -->
            <div class="mb-3 flex flex-wrap items-center gap-2">
                <div class="badge micro px-3 py-1 rounded-lg flex items-center gap-2" data-target-out="o5"
                    data-target-contains="ABC-123" data-target-code="c5" data-target-kws="my_data">
                    <span class="status">üéØ Target: output memuat "ABC-123"</span>
                </div>
                <div class="flex gap-2">
                    <button data-hint-btn data-hint-wrap="hints-c5" data-hint-level="1"
                        class="px-3 py-1 rounded border border-slate-700 hover:bg-slate-800 text-xs">Hint 1</button>
                    <button data-hint-btn data-hint-wrap="hints-c5" data-hint-level="2"
                        class="px-3 py-1 rounded border border-slate-700 hover:bg-slate-800 text-xs">Hint 2</button>
                    <button data-hint-btn data-hint-wrap="hints-c5" data-hint-level="3"
                        class="px-3 py-1 rounded border border-slate-700 hover:bg-slate-800 text-xs">Hint 3</button>
                </div>
            </div>
            <div id="hints-c5" class="mb-3">
                <div class="hint-box" data-hint="1">
                    <div class="mini-card rounded-lg p-3 text-xs text-slate-300">üí° Variabel <b>secret</b> hidupnya cuma
                        di dalam fungsi.</div>
                </div>
                <div class="hint-box" data-hint="2">
                    <div class="mini-card rounded-lg p-3 text-xs text-slate-300">üí° Ambil nilainya lewat <b>return</b>,
                        simpan ke variabel luar.</div>
                </div>
                <div class="hint-box" data-hint="3">
                    <div class="mini-card rounded-lg p-3 text-xs text-slate-300">‚úÖ Contoh: <code
                            class="text-green-300">my_data = get_secret()</code></div>
                </div>
            </div>

            <div class="editor-container">
                <div class="editor-header"><span>ex5.py</span></div>
                <textarea id="c5" class="editor-textarea">

def get_secret():
    secret = "ABC-123"
    return secret

my_data = get_secret()
print(my_data)</textarea>
            </div>
            <div class="mt-2 flex gap-2">
                <button data-action="run" data-code="c5" data-out="o5" data-fb="f5"
                    class="px-4 py-2 bg-indigo-600 rounded text-sm font-bold">‚ñ∂ RUN</button>
                <button data-action="check" data-code="c5" data-out="o5" data-fb="f5" data-expect="ABC-123"
                    data-kws="get_secret()" class="px-4 py-2 bg-emerald-600 rounded text-sm font-bold">‚úì CHECK</button>
            </div>
            <div id="o5" class="output-area mt-2 rounded"></div>
            <div id="f5" class="hidden"></div>
        </section>

        <!-- Slide 19: Early Return -->
        <section class="slide">
            <h2 class="text-2xl font-bold mb-6">#7 Early Return (Guard Clause)</h2>
            <p class="mb-4">Polisi Tidur dalam kode. Stop eksekusi jika syarat tidak terpenuhi.</p>
            <p class="text-xs text-slate-400 mb-4">Aktivitas: klik jawaban yang benar.</p>
            <div class="bg-slate-800 p-4 rounded text-sm font-mono border-l-4 border-red-500">
                def process(data):<br>
                &nbsp;&nbsp;if not data: <span class="text-red-400">return None</span><br>
                &nbsp;&nbsp;<span class="text-slate-500"># Heavy logic here...</span><br>
                &nbsp;&nbsp;return "Done"
            </div>
            <p class="mt-4 text-xs text-slate-400">Menghindari `else` yang bersarang dalam (Nested Hell).</p>

            <!-- NEW: tiny quiz -->
            <div class="mini-card rounded-xl p-4 mt-6">
                <div class="text-xs text-slate-400 mb-2">Quick Check: Guard clause itu ngapain?</div>
                <div class="grid md:grid-cols-3 gap-2 text-sm">
                    <button
                        class="choice-btn bg-slate-800 border border-slate-700 rounded-lg p-3 hover:bg-indigo-900/30"
                        onclick="mc('gcFb','‚úÖ Betul. Guard clause = berhenti lebih cepat kalau syarat gagal.')">Stop
                        lebih cepat saat input tidak valid</button>
                    <button class="choice-btn bg-slate-800 border border-slate-700 rounded-lg p-3 hover:bg-red-900/30"
                        onclick="mc('gcFb','‚ùå Bukan. Guard clause bukan untuk mengulang.')">Mengulang logic sampai
                        benar</button>
                    <button class="choice-btn bg-slate-800 border border-slate-700 rounded-lg p-3 hover:bg-red-900/30"
                        onclick="mc('gcFb','‚ùå Bukan. Ini tentang readability dan safety, bukan speed doang.')">Agar
                        selalu lebih cepat</button>
                </div>
                <div id="gcFb" class="mt-3 text-sm font-semibold"></div>
            </div>
        </section>

        <!-- Slide 20: Exercise 6 -->
        <section class="slide">
            <h2 class="text-xl font-bold mb-2">Code Task 6: Validator</h2>
            <p class="text-xs text-slate-400 mb-3">Tugas: buat aturan. Kalau umur < 18, langsung return "Too Young"
                    .</p>

                    <!-- NEW: Target + Hints -->
                    <div class="mb-3 flex flex-wrap items-center gap-2">
                        <div class="badge micro px-3 py-1 rounded-lg flex items-center gap-2" data-target-out="o6"
                            data-target-contains="Too Young" data-target-code="c6" data-target-kws="return">
                            <span class="status">üéØ Target: output mengandung "Too Young" lalu "Allowed"</span>
                        </div>
                        <div class="flex gap-2">
                            <button data-hint-btn data-hint-wrap="hints-c6" data-hint-level="1"
                                class="px-3 py-1 rounded border border-slate-700 hover:bg-slate-800 text-xs">Hint
                                1</button>
                            <button data-hint-btn data-hint-wrap="hints-c6" data-hint-level="2"
                                class="px-3 py-1 rounded border border-slate-700 hover:bg-slate-800 text-xs">Hint
                                2</button>
                            <button data-hint-btn data-hint-wrap="hints-c6" data-hint-level="3"
                                class="px-3 py-1 rounded border border-slate-700 hover:bg-slate-800 text-xs">Hint
                                3</button>
                        </div>
                    </div>
                    <div id="hints-c6" class="mb-3">
                        <div class="hint-box" data-hint="1">
                            <div class="mini-card rounded-lg p-3 text-xs text-slate-300">üí° Guard clause: cek <code
                                    class="text-green-300">age &lt; 18</code> dulu.</div>
                        </div>
                        <div class="hint-box" data-hint="2">
                            <div class="mini-card rounded-lg p-3 text-xs text-slate-300">üí° Jika kecil, langsung <code
                                    class="text-green-300">return "Too Young"</code></div>
                        </div>
                        <div class="hint-box" data-hint="3">
                            <div class="mini-card rounded-lg p-3 text-xs text-slate-300">‚úÖ Struktur: <code
                                    class="text-green-300">if age &lt; 18: return "Too Young"</code></div>
                        </div>
                    </div>

                    <div class="editor-container">
                        <div class="editor-header"><span>ex6.py</span></div>
                        <textarea id="c6" class="editor-textarea">

def check_age(age):
    return "Allowed"

print(check_age(10))
print(check_age(20))</textarea>
                    </div>
                    <div class="mt-2 flex gap-2">
                        <button data-action="run" data-code="c6" data-out="o6" data-fb="f6"
                            class="px-4 py-2 bg-indigo-600 rounded text-sm font-bold">‚ñ∂ RUN</button>
                        <button data-action="check" data-code="c6" data-out="o6" data-fb="f6" data-expect="Too Young"
                            data-kws="return,&lt;"
                            data-test="assert check_age(5)=='Too Young' and check_age(20)=='Allowed'"
                            class="px-4 py-2 bg-emerald-600 rounded text-sm font-bold">‚úì CHECK</button>
                    </div>
                    <div id="o6" class="output-area mt-2 rounded"></div>
                    <div id="f6" class="hidden"></div>
        </section>

        <!-- Slide 21: Quiz 2 -->
        <section class="slide">
            <div class="text-center py-10">
                <h3 class="text-2xl font-bold mb-8">Checkpoint Beta</h3>
                <p class="text-xs text-slate-400 mb-3">Aktivitas: klik jawaban yang benar.</p>
                <code class="block bg-black/50 p-4 rounded mb-8 text-xl">func(a=1, b=2)</code>
                <p class="mb-6">What happens if we call <code>func(b=5)</code>?</p>
                <div class="grid grid-cols-2 gap-4">
                    <button class="bg-slate-800 p-4 rounded hover:bg-green-600 transition"
                        onclick="document.getElementById('cpBfb').classList.remove('hidden'); document.getElementById('cpBfb').innerText='‚úÖ Benar! a tetap 1 (default), b jadi 5 karena kita override dengan keyword.'; showSlide(21);">a
                        is 1, b is 5</button>
                    <button class="bg-slate-800 p-4 rounded hover:bg-red-600 transition"
                        onclick="document.getElementById('cpBfb').classList.remove('hidden'); document.getElementById('cpBfb').innerText='‚ùå Tidak error. Karena b diisi lewat keyword, a tetap default.';">Error</button>
                </div>
                <p id="cpBfb" class="mt-6 text-sm text-slate-200 hidden"></p>
            </div>
        </section>

        <!-- LEVEL 3: ADVANCED -->
        <section class="slide">
            <div class="pt-20 text-center">
                <div
                    class="text-6xl mb-4 font-black text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-500">
                    LEVEL 3</div>
                <h2 class="text-3xl text-white font-bold">System Architecture</h2>
                <p class="mt-4 text-purple-300">Composition ‚Ä¢ Pipelines ‚Ä¢ Engineering Standards</p>

                <!-- NEW: goal -->
                <div class="mini-card rounded-xl p-4 mt-8 max-w-2xl mx-auto text-left">
                    <div class="text-xs text-slate-400 mb-2">üéØ Goal level 3</div>
                    <div class="text-sm text-slate-200">Kamu akan menggabungkan beberapa fungsi menjadi <b>pipeline</b>
                        dan membuat program lebih modular.</div>
                </div>
            </div>
        </section>

        <!-- Slide 23: Multiple Return -->
        <section class="slide">
            <h2 class="text-2xl font-bold mb-6">#8 Multiple Returns</h2>
            <p class="mb-4">Python bisa mengembalikan tuple (paket data).</p>
            <p class="text-xs text-slate-400 mb-4">Aktivitas: klik Unpack untuk melihat data dibagi jadi 2 variabel.</p>
            <div class="bg-slate-800 p-4 rounded text-sm font-mono">
                return x, y, z
            </div>
            <div class="mt-4 text-sm">
                Disebut <b>Tuple Unpacking</b> saat diterima:<br>
                <code class="text-green-400">a, b, c = get_coordinates()</code>
            </div>

            <!-- NEW: visual unpack -->
            <div class="mini-card rounded-xl p-4 mt-6">
                <div class="flex items-center justify-between gap-2">
                    <div>
                        <div class="text-xs text-slate-400">Unpacking Visual</div>
                        <div class="text-sm font-semibold">Klik untuk "pecah" tuple jadi variabel</div>
                    </div>
                    <button class="px-4 py-2 bg-indigo-600 rounded text-xs font-bold uppercase"
                        onclick="doUnpack()">Unpack</button>
                </div>
                <div class="mt-4 grid md:grid-cols-3 gap-2 text-xs font-mono">
                    <div class="pill rounded-lg p-3">Tuple: <span id="tup" class="text-indigo-300">(1920, 1080)</span>
                    </div>
                    <div class="pill rounded-lg p-3">w = <span id="uw" class="text-slate-400">?</span></div>
                    <div class="pill rounded-lg p-3">h = <span id="uh" class="text-slate-400">?</span></div>
                </div>
                <div id="unpackMsg" class="mt-3 text-sm text-slate-300"></div>
            </div>
        </section>

        <!-- Slide 24: Exercise 7 -->
        <section class="slide">
            <h2 class="text-xl font-bold mb-2">Code Task 7: Unpacking</h2>
            <p class="text-xs text-slate-400 mb-3">Tugas: ambil 2 angka dari fungsi lalu print "Res: 1920x1080".</p>
            <p class="text-xs text-slate-400 mb-3">Tulis 2 baris: <b>w, h = get_screen()</b> lalu <b>print(f"Res:
                    {w}x{h}")</b>.</p>

            <!-- NEW: Target + Hints -->
            <div class="mb-3 flex flex-wrap items-center gap-2">
                <div class="badge micro px-3 py-1 rounded-lg flex items-center gap-2" data-target-out="o7"
                    data-target-contains="Res: 1920" data-target-code="c7" data-target-kws="w, h">
                    <span class="status">üéØ Target: output memuat "Res: 1920x1080"</span>
                </div>
                <div class="flex gap-2">
                    <button data-hint-btn data-hint-wrap="hints-c7" data-hint-level="1"
                        class="px-3 py-1 rounded border border-slate-700 hover:bg-slate-800 text-xs">Hint 1</button>
                    <button data-hint-btn data-hint-wrap="hints-c7" data-hint-level="2"
                        class="px-3 py-1 rounded border border-slate-700 hover:bg-slate-800 text-xs">Hint 2</button>
                    <button data-hint-btn data-hint-wrap="hints-c7" data-hint-level="3"
                        class="px-3 py-1 rounded border border-slate-700 hover:bg-slate-800 text-xs">Hint 3</button>
                </div>
            </div>
            <div id="hints-c7" class="mb-3">
                <div class="hint-box" data-hint="1">
                    <div class="mini-card rounded-lg p-3 text-xs text-slate-300">üí° Hasil fungsi adalah 2 angka: width
                        dan height.</div>
                </div>
                <div class="hint-box" data-hint="2">
                    <div class="mini-card rounded-lg p-3 text-xs text-slate-300">üí° Unpack: <code
                            class="text-green-300">w, h = get_screen()</code></div>
                </div>
                <div class="hint-box" data-hint="3">
                    <div class="mini-card rounded-lg p-3 text-xs text-slate-300">‚úÖ Lalu print: <code
                            class="text-green-300">print(f"Res: {w}x{h}")</code></div>
                </div>
            </div>

            <div class="editor-container">
                <div class="editor-header"><span>ex7.py</span></div>
                <textarea id="c7" class="editor-textarea">

def get_screen():
    return 1920, 1080

 
</textarea>
            </div>
            <div class="mt-2 flex gap-2">
                <button data-action="run" data-code="c7" data-out="o7" data-fb="f7"
                    class="px-4 py-2 bg-indigo-600 rounded text-sm font-bold">‚ñ∂ RUN</button>
                <button data-action="check" data-code="c7" data-out="o7" data-fb="f7" data-expect="Res: 1920"
                    data-kws="get_screen" data-test="assert w==1920 and h==1080"
                    class="px-4 py-2 bg-emerald-600 rounded text-sm font-bold">‚úì CHECK</button>
            </div>
            <div id="o7" class="output-area mt-2 rounded"></div>
            <div id="f7" class="hidden"></div>
        </section>

        <!-- Slide 25: Composition -->
        <section class="slide">
            <h2 class="text-2xl font-bold mb-6">#9 Rantai Fungsi (Chain)</h2>
            <p class="mb-3">Bayangkan function itu seperti <b>Pabrik Kue</b>.</p>
            <p class="text-xs text-slate-400 mb-4">Urutannya harus benar: Buat Adonan ‚Üí Panggang ‚Üí Hias. Kalau terbalik,
                kuenya hancur!</p>
            <p class="text-xs text-slate-400 mb-4">Aktivitas: susun urutan pabrik kue yang benar.</p>

            <!-- Hide Answer, Show Challenge -->
            <div class="bg-slate-800/50 p-6 rounded-xl border border-slate-700 mb-6 text-center">
                <div class="text-4xl mb-4 tracking-widest">ü•ö ‚ùì ‚ùì ‚ùì üéÇ</div>
                <p class="text-sm text-slate-300">Tantangan: Ubah telur jadi kue ulang tahun!</p>
                <p class="text-xs text-slate-500 mt-1">Tapi langkahnya masih acak di bawah ini. Ayo rapikan!</p>
            </div>

            <!-- NEW: pipeline order game -->
            <div class="mini-card rounded-xl p-4 mt-6">
                <div class="text-xs text-slate-400 mb-2">Bantu Koki menyusun urutan:</div>
                <div class="flex flex-wrap gap-2">
                    <span class="draggable-item bg-blue-600 px-3 py-2 rounded text-xs font-bold"
                        draggable="true">Aduk()</span>
                    <span class="draggable-item bg-purple-600 px-3 py-2 rounded text-xs font-bold"
                        draggable="true">Panggang()</span>
                    <span class="draggable-item bg-green-600 px-3 py-2 rounded text-xs font-bold"
                        draggable="true">Hias()</span>
                </div>
                <div class="mt-3 grid grid-cols-3 gap-2">
                    <div class="drop-zone h-12 border border-dashed border-slate-500 rounded bg-slate-800 flex items-center justify-center text-xs"
                        data-pipe="1">1</div>
                    <div class="drop-zone h-12 border border-dashed border-slate-500 rounded bg-slate-800 flex items-center justify-center text-xs"
                        data-pipe="2">2</div>
                    <div class="drop-zone h-12 border border-dashed border-slate-500 rounded bg-slate-800 flex items-center justify-center text-xs"
                        data-pipe="3">3</div>
                </div>
                <div class="mt-3 flex gap-2">
                    <button class="px-4 py-2 bg-indigo-600 rounded text-xs font-bold" onclick="checkPipeOrder()">CEK
                        URUTAN</button>
                    <button class="px-4 py-2 border border-slate-700 rounded text-xs font-bold hover:bg-slate-800"
                        onclick="resetPipe()">ULANG</button>
                </div>
                <div id="pipeFb" class="mt-3 text-sm font-semibold"></div>
            </div>
        </section>

        <!-- Slide 26: Factory Animation -->
        <section class="slide">
            <h2 class="text-xl font-bold mb-4">Animasi Pabrik Kue</h2>
            <p class="text-xs text-slate-400 mb-3">Lihat bagaimana bahan mentah berubah jadi kue cantik!</p>
            <p class="text-xs text-slate-400 mb-3">Aktivitas: klik <b>MULAI MASAK</b>.</p>
            <button onclick="runPipe()" class="mb-4 px-4 py-2 bg-indigo-600 rounded text-xs font-bold uppercase">Mulai
                Masak</button>
            <div
                class="relative h-40 bg-slate-800 rounded border border-slate-700 overflow-hidden flex items-center justify-around px-10">
                <div
                    class="z-10 bg-slate-700 w-16 h-16 rounded-full flex items-center justify-center text-xs border border-slate-500">
                    Aduk</div>
                <div
                    class="z-10 bg-slate-700 w-16 h-16 rounded-full flex items-center justify-center text-xs border border-slate-500">
                    Oven</div>
                <div
                    class="z-10 bg-slate-700 w-16 h-16 rounded-full flex items-center justify-center text-xs border border-slate-500">
                    Hias</div>
                <div id="prod"
                    class="absolute left-4 w-8 h-8 bg-white rounded flex items-center justify-center shadow-[0_0_15px_white]">
                    ü•ö</div>
            </div>
            <div class="mt-4 text-xs text-slate-400" id="pipeSimMsg">Klik tombol untuk mulai memasak.</div>
            <script>
                function runPipe() {
                    const p = document.getElementById('prod');
                    const msg = document.getElementById('pipeSimMsg');
                    p.style.transition = 'none'; p.style.left = '20px'; p.innerText = 'ü•ö';
                    msg.innerText = 'Tahap 1: Mengaduk telur & tepung...';
                    setTimeout(() => {
                        p.style.transition = 'left 2s linear'; p.style.left = '90%';
                        setTimeout(() => { p.innerText = 'ü•£'; msg.innerText = 'Tahap 1 Selesai. Masuk ke Oven...'; }, 400);
                        setTimeout(() => { p.innerText = 'üçû'; msg.innerText = 'Tahap 2 Selesai. Roti sudah matang, waktunya hias!'; }, 900);
                        setTimeout(() => { p.innerText = 'üéÇ'; msg.innerText = 'Yey! Kue Ulang Tahun sudah jadi! üéâ'; }, 1500);
                    }, 100);
                }
            </script>
        </section>

        <!-- Slide 27: Connection to Coding -->
        <section class="slide">
            <h2 class="text-2xl font-bold mb-4">Apa Hubungannya dengan Coding? ü§î</h2>
            <div class="bg-slate-800 p-6 rounded-xl border border-slate-700">
                <p class="mb-4 text-sm">Sama seperti Pabrik Kue, <b>Function</b> juga bisa estafet!</p>

                <div class="space-y-4 font-mono text-sm">
                    <div class="flex items-center gap-3">
                        <span class="bg-blue-900 px-3 py-1 rounded border border-blue-700">1. aduk(ü•ö)</span>
                        <span class="text-slate-400">‚Üí jadi</span>
                        <span class="text-yellow-200">Adonan ü•£</span>
                    </div>
                    <div class="flex items-center gap-3">
                        <span class="bg-purple-900 px-3 py-1 rounded border border-purple-700">2. panggang(ü•£)</span>
                        <span class="text-slate-400">‚Üí jadi</span>
                        <span class="text-orange-200">Roti üçû</span>
                    </div>
                    <div class="flex items-center gap-3">
                        <span class="bg-green-900 px-3 py-1 rounded border border-green-700">3. hias(üçû)</span>
                        <span class="text-slate-400">‚Üí jadi</span>
                        <span class="text-pink-300">Kue Tart üéÇ</span>
                    </div>
                </div>

                <div class="mt-6 pt-6 border-t border-slate-600">
                    <p class="mb-2 text-slate-300 text-sm">Di Python, kita tulisnya seperti ini:</p>
                    <code class="block bg-black p-4 rounded text-indigo-400 text-center text-lg font-bold shadow-lg">
                        kue = hias(panggang(aduk(telur)))
                    </code>
                    <p class="mt-3 text-xs text-slate-400 text-center">Output fungsi di dalam (aduk) dimakan sama fungsi
                        di luarnya (panggang), terus sampai jadi kue!</p>
                </div>
            </div>
        </section>

        <!-- Slide 28: Mini Project 1 -->
        <section class="slide">
            <h2 class="text-xl font-bold mb-2">Misi 1: Diskon Mainan üß∏</h2>
            <p class="text-xs text-slate-400 mb-3">Toko mainan lagi ada diskon 10% (0.1) untuk semua barang.</p>
            <p class="text-xs text-slate-400 mb-3">Tugas: Lengkapi fungsi <code>hitung_diskon</code> supaya
                mengembalikan nilai diskon.</p>

            <!-- NEW: Target + Hints -->
            <div class="mb-3 flex flex-wrap items-center gap-2">
                <div class="badge micro px-3 py-1 rounded-lg flex items-center gap-2" data-target-out="om1"
                    data-target-contains="5000.0" data-target-code="mp1" data-target-kws="return">
                    <span class="status">üéØ Target: Diskon dari 50000 adalah 5000.0</span>
                </div>
                <div class="flex gap-2">
                    <button data-hint-btn data-hint-wrap="hints-mp1" data-hint-level="1"
                        class="px-3 py-1 rounded border border-slate-700 hover:bg-slate-800 text-xs">Hint 1</button>
                    <button data-hint-btn data-hint-wrap="hints-mp1" data-hint-level="2"
                        class="px-3 py-1 rounded border border-slate-700 hover:bg-slate-800 text-xs">Hint 2</button>
                    <button data-hint-btn data-hint-wrap="hints-mp1" data-hint-level="3"
                        class="px-3 py-1 rounded border border-slate-700 hover:bg-slate-800 text-xs">Hint 3</button>
                </div>
            </div>
            <div id="hints-mp1" class="mb-3">
                <div class="hint-box" data-hint="1">
                    <div class="mini-card rounded-lg p-3 text-xs text-slate-300">üí° Diskon 10% itu sama dengan harga
                        dikali 0.1</div>
                </div>
                <div class="hint-box" data-hint="2">
                    <div class="mini-card rounded-lg p-3 text-xs text-slate-300">üí° Pakai rumus: <code
                            class="text-green-300">return harga * 0.1</code></div>
                </div>
                <div class="hint-box" data-hint="3">
                    <div class="mini-card rounded-lg p-3 text-xs text-slate-300">‚úÖ Kalau harga 50000, hasilnya harus
                        5000.</div>
                </div>
            </div>

            <div class="editor-container">
                <textarea id="mp1" class="editor-textarea">

def hitung_diskon(harga):
    # Hapus baris di bawah, ganti dengan rumus
    return 0 

# Jangan ubah baris ini
print(hitung_diskon(50000))</textarea>
            </div>
            <div class="mt-2 flex gap-2">
                <button data-action="run" data-code="mp1" data-out="om1" data-fb="fm1"
                    class="px-4 py-2 bg-indigo-600 rounded text-sm font-bold">‚ñ∂ JALANKAN</button>
                <button data-action="check" data-code="mp1" data-out="om1" data-fb="fm1" data-expect="5000.0"
                    data-test="assert hitung_diskon(50000)==5000"
                    class="px-4 py-2 bg-emerald-600 rounded text-sm font-bold">‚úì CEK JAWABAN</button>
            </div>
            <div id="om1" class="output-area mt-2 rounded"></div>
            <div id="fm1" class="hidden"></div>
        </section>

        <!-- Slide 28: Mini Project 2 -->
        <section class="slide">
            <h2 class="text-xl font-bold mb-2">Misi 2: Total Bayar üõí</h2>
            <p class="text-xs text-slate-400 mb-3">Rumus bayar di kasir: <b>Harga Barang - Diskon + Ongkir</b>.</p>
            <p class="text-xs text-slate-400 mb-3">Tugas: Gabungkan fungsi-fungsi di bawah jadi satu rumus.</p>

            <!-- NEW: Tests progress -->
            <div class="mini-card rounded-xl p-4 mb-3">
                <div class="flex items-center justify-between">
                    <div>
                        <div class="text-xs text-slate-400">Status Tes</div>
                        <div class="text-sm font-semibold">Semua lampu harus hijau ‚úÖ</div>
                    </div>
                    <div id="mp2prog" class="badge micro px-3 py-1 rounded-lg">0/3 oke</div>
                </div>
                <div class="mt-3 grid md:grid-cols-3 gap-2 text-xs font-mono">
                    <div class="pill rounded-lg p-3">Diskon OK? <span id="t1" class="text-slate-400">...</span></div>
                    <div class="pill rounded-lg p-3">Ongkir OK? <span id="t2" class="text-slate-400">...</span></div>
                    <div class="pill rounded-lg p-3">Total Benar? <span id="t3" class="text-slate-400">...</span></div>
                </div>
            </div>

            <!-- NEW: Target + Hints -->
            <div class="mb-3 flex flex-wrap items-center gap-2">
                <div class="badge micro px-3 py-1 rounded-lg flex items-center gap-2" data-target-out="om2"
                    data-target-contains="45000" data-target-code="mp2" data-target-kws="hitung_diskon,hitung_ongkir">
                    <span class="status">üéØ Target: Bayar 45000 (dari 50000 - 5000 diskon + 0 ongkir)</span>
                </div>
                <div class="flex gap-2">
                    <button data-hint-btn data-hint-wrap="hints-mp2" data-hint-level="1"
                        class="px-3 py-1 rounded border border-slate-700 hover:bg-slate-800 text-xs">Hint 1</button>
                    <button data-hint-btn data-hint-wrap="hints-mp2" data-hint-level="2"
                        class="px-3 py-1 rounded border border-slate-700 hover:bg-slate-800 text-xs">Hint 2</button>
                    <button data-hint-btn data-hint-wrap="hints-mp2" data-hint-level="3"
                        class="px-3 py-1 rounded border border-slate-700 hover:bg-slate-800 text-xs">Hint 3</button>
                </div>
            </div>
            <div id="hints-mp2" class="mb-3">
                <div class="hint-box" data-hint="1">
                    <div class="mini-card rounded-lg p-3 text-xs text-slate-300">üí° Kamu punya fungsi <code
                            class="text-green-300">hitung_diskon</code> dan <code
                            class="text-green-300">hitung_ongkir</code>. Panggil mereka!</div>
                </div>
                <div class="hint-box" data-hint="2">
                    <div class="mini-card rounded-lg p-3 text-xs text-slate-300">üí° Rumus Total = <code
                            class="text-blue-300">harga - diskon + ongkir</code></div>
                </div>
                <div class="hint-box" data-hint="3">
                    <div class="mini-card rounded-lg p-3 text-xs text-slate-300">‚úÖ <code
                            class="text-green-300">potongan = hitung_diskon(harga)</code><br><code
                            class="text-green-300">return harga - potongan + hitung_ongkir(harga)</code></div>
                </div>
            </div>

            <div class="editor-container">
                <textarea id="mp2" class="editor-textarea">
# Fungsi Bantuan (Sudah jadi, jangan diubah)
def hitung_diskon(h): return h * 0.1
def hitung_ongkir(h): return 0 # Gratis ongkir!

def hitung_total_bayar(harga):
    # 1. Panggil hitung_diskon(harga), simpan ke variabel
    # 2. Panggil hitung_ongkir(harga), simpan ke variabel
    # 3. Return: harga - diskon + ongkir
    return 0

# Coba hitung kalau belanja 50.000
print(hitung_total_bayar(50000))</textarea>
            </div>
            <div class="mt-2 flex gap-2">
                <button data-action="run" data-code="mp2" data-out="om2" data-fb="fm2"
                    class="px-4 py-2 bg-indigo-600 rounded text-sm font-bold" onclick="setTimeout(runMP2Tests, 50)">‚ñ∂
                    JALANKAN</button>
                <button data-action="check" data-code="mp2" data-out="om2" data-fb="fm2" data-expect="45000"
                    data-kws="hitung_diskon,hitung_ongkir" data-test="assert hitung_total_bayar(100)==90"
                    class="px-4 py-2 bg-emerald-600 rounded text-sm font-bold" onclick="setTimeout(runMP2Tests, 50)">‚úì
                    CEK JAWABAN</button>
            </div>
            <div id="om2" class="output-area mt-2 rounded"></div>
            <div id="fm2" class="hidden"></div>
        </section>

        <!-- Slide 29: Final Boss -->
        <section class="slide">
            <div class="bg-gradient-to-br from-slate-800 to-black p-6 rounded-xl border border-slate-700">
                <h2 class="text-2xl font-bold mb-4 text-red-500">üîí Pintu Rahasia Markas</h2>
                <p class="text-sm mb-4">Hanya Ketua yang boleh masuk!</p>
                <p class="text-sm mb-4">Buat fungsi kunci: Jika nama <b>"Bos"</b> DAN password <b>"123"</b> ‚Üí Buka Pintu
                    (Return "MASUK"). Selain itu ‚Üí "DITOLAK".</p>
                <p class="text-xs text-slate-400 mb-4">Tips: Gunakan <b>if</b> dan <b>and</b>.</p>

                <!-- NEW: target + progressive tests -->
                <div class="mini-card rounded-xl p-4 mb-4">
                    <div class="flex items-center justify-between">
                        <div>
                            <div class="text-xs text-slate-400">Cek Keamanan</div>
                            <div class="text-sm font-semibold">Sistem Keamanan Online üõ°Ô∏è</div>
                        </div>
                        <div id="bossProg" class="badge micro px-3 py-1 rounded-lg">0/2 aman</div>
                    </div>
                    <div class="mt-3 grid md:grid-cols-2 gap-2 text-xs font-mono">
                        <div class="pill rounded-lg p-3">Bos/123 ‚Üí <span id="b1" class="text-slate-400">...</span></div>
                        <div class="pill rounded-lg p-3">Orang Asing ‚Üí <span id="b2" class="text-slate-400">...</span>
                        </div>
                    </div>

                    <div class="mt-3 flex gap-2">
                        <button data-hint-btn data-hint-wrap="hints-boss" data-hint-level="1"
                            class="px-3 py-2 rounded border border-slate-700 hover:bg-slate-800 text-xs font-bold">Hint
                            1</button>
                        <button data-hint-btn data-hint-wrap="hints-boss" data-hint-level="2"
                            class="px-3 py-2 rounded border border-slate-700 hover:bg-slate-800 text-xs font-bold">Hint
                            2</button>
                        <button data-hint-btn data-hint-wrap="hints-boss" data-hint-level="3"
                            class="px-3 py-2 rounded border border-slate-700 hover:bg-slate-800 text-xs font-bold">Hint
                            3</button>
                    </div>
                    <div id="hints-boss" class="mt-3">
                        <div class="hint-box" data-hint="1">
                            <div class="mini-card rounded-lg p-3 text-xs text-slate-300">üí° Cek apakah nama == "Bos" DAN
                                password == "123".</div>
                        </div>
                        <div class="hint-box" data-hint="2">
                            <div class="mini-card rounded-lg p-3 text-xs text-slate-300">üí° Kalau benar, <code
                                    class="text-green-300">return "MASUK"</code>.</div>
                        </div>
                        <div class="hint-box" data-hint="3">
                            <div class="mini-card rounded-lg p-3 text-xs text-slate-300">‚úÖ <code
                                    class="text-green-300">if nama=="Bos" and sandi=="123": return "MASUK"</code></div>
                        </div>
                    </div>
                </div>

                <div class="editor-container">
                    <textarea id="fb" class="editor-textarea">

def cek_pintu(nama, sandi):
    # Tulis kodemu di sini
    return "DITOLAK" 

print(cek_pintu('Bos', '123'))</textarea>
                </div>
                <div class="mt-4 flex gap-2">
                    <button data-action="run" data-code="fb" data-out="ofb" data-fb="ffb"
                        class="px-4 py-2 bg-indigo-600 rounded text-sm font-bold"
                        onclick="setTimeout(runBossTests, 50)">‚ñ∂ COBA KUNCI</button>
                    <button data-action="check" data-code="fb" data-out="ofb" data-fb="ffb"
                        data-test="assert cek_pintu('Bos','123')=='MASUK' and cek_pintu('Maling','000')=='DITOLAK'"
                        class="px-4 py-2 bg-yellow-500 text-black rounded text-sm font-bold"
                        onclick="setTimeout(runBossTests, 50)">KIRIM JAWABAN</button>
                </div>
                <div id="ofb" class="output-area mt-2 rounded"></div>
                <div id="ffb" class="hidden"></div>
            </div>
        </section>

        <!-- Slide 30: Completion -->
        <section class="slide">
            <div class="text-center py-20">
                <h1 class="text-4xl font-bold text-green-400 mb-4">LEVEL COMPLETE</h1>
                <p class="text-slate-400">Kamu sudah paham dasar fungsi. Keren!</p>
                <div class="mt-8">
                    <button onclick="showSlide(30)"
                        class="px-6 py-3 bg-indigo-600 rounded font-bold hover:bg-indigo-500">Go to Bonus Content
                        ‚û°</button>
                </div>

                <!-- NEW: reflection prompt -->
                <div class="mini-card rounded-xl p-5 mt-10 max-w-2xl mx-auto text-left">
                    <div class="text-xs text-slate-400 mb-2">üß† Refleksi singkat (kelas reguler)</div>
                    <ol class="list-decimal ml-5 text-sm text-slate-200 space-y-1">
                        <li>Kapan kamu harus pakai <b>return</b> (bukan print)?</li>
                        <li>Di task mana kamu paling sering error? Kenapa?</li>
                        <li>Kalau membuat program lebih besar, fungsi kecil apa yang akan kamu buat dulu?</li>
                    </ol>
                </div>
            </div>
        </section>

        <!-- Slide 31: PRO TIPS (NEW) -->
        <section class="slide">
            <h2 class="text-2xl font-bold mb-6 text-yellow-400 tracking-wider">LEVEL 4: PRO STANDARDS</h2>

            <div class="grid gap-6">
                <div class="bg-slate-800 p-5 rounded-lg border-l-4 border-yellow-500">
                    <h3 class="font-bold text-white mb-2">1. Type Hinting</h3>
                    <p class="text-xs text-slate-400 mb-2">Kasih tahu tipe data biar coding lebih aman.</p>
                    <code class="text-sm font-mono text-green-300">def add(a: int, b: int) -> int:</code>
                </div>

                <div class="bg-slate-800 p-5 rounded-lg border-l-4 border-blue-500">
                    <h3 class="font-bold text-white mb-2">2. Docstrings</h3>
                    <p class="text-xs text-slate-400 mb-2">Dokumentasi di dalam kode (Industry Standard).</p>
                    <div class="text-sm font-mono text-slate-300">
                        def login(user):<br>
                        &nbsp;&nbsp;<span class="text-yellow-600">"""Process user login."""</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Slide 32: THE TRAP (NEW) -->
        <section class="slide">
            <div class="border-2 border-red-600 bg-red-900/10 p-8 rounded-xl">
                <h2 class="text-3xl font-black mb-4 text-red-500">‚ö†Ô∏è THE MUTABLE TRAP</h2>
                <p class="mb-4 text-lg">Bug Paling Terkenal di Python.</p>
                <p class="text-xs text-slate-400 mb-4">Aktivitas: klik jawaban yang benar.</p>

                <div class="grid grid-cols-2 gap-8 text-sm font-mono mt-8">
                    <div class="opacity-50">
                        <div class="text-red-400 font-bold mb-2">JANGAN LAKUKAN:</div>
                        def add(item, <span class="text-red-500 border-b border-red-500">list=[]</span>):<br>
                        &nbsp;&nbsp;list.append(item)<br>
                        &nbsp;&nbsp;return list
                        <div class="mt-2 text-xs text-slate-400">List default tersimpan selamanya di memori!</div>
                    </div>
                    <div>
                        <div class="text-green-400 font-bold mb-2">BENAR (Safe):</div>
                        def add(item, <span class="text-green-500">list=None</span>):<br>
                        &nbsp;&nbsp;if list is None: list = []<br>
                        &nbsp;&nbsp;list.append(item)<br>
                        &nbsp;&nbsp;return list
                    </div>
                </div>

                <!-- NEW: quick comprehension -->
                <div class="mini-card rounded-xl p-4 mt-8">
                    <div class="text-xs text-slate-400 mb-2">Quick Check</div>
                    <div class="grid md:grid-cols-2 gap-2 text-sm">
                        <button
                            class="choice-btn bg-slate-800 border border-slate-700 rounded-lg p-3 hover:bg-indigo-900/30"
                            onclick="mc('trapFb','‚úÖ Betul. Default list=[] akan dipakai terus untuk pemanggilan berikutnya.')">Kenapa
                            list=[] berbahaya?</button>
                        <button
                            class="choice-btn bg-slate-800 border border-slate-700 rounded-lg p-3 hover:bg-red-900/30"
                            onclick="mc('trapFb','‚ùå Bukan itu. Masalahnya bukan syntax, tapi mutable default yang tersimpan.')">Karena
                            error syntax?</button>
                    </div>
                    <div id="trapFb" class="mt-3 text-sm font-semibold"></div>
                </div>
            </div>
        </section>

        <!-- Slide 33: CHEAT SHEET (NEW) -->
        <section class="slide">
            <h2 class="text-2xl font-bold mb-4 text-center">THE ENGINEER'S CHEAT SHEET</h2>
            <div
                class="bg-black p-6 rounded-xl font-mono text-xs md:text-sm shadow-2xl overflow-y-auto max-h-[60vh] border border-slate-700">
                <span class="text-purple-400">def</span> <span class="text-blue-400">master_func</span>(
                <span class="text-orange-400">req</span>,
                <span class="text-green-400">opt="Default"</span>,
                <span class="text-pink-400">*args</span>
                ) <span class="text-yellow-500">-> str</span>:

                <br><br>
                &nbsp;&nbsp;<span class="text-slate-500">"""Docstring: Explains function."""</span>

                <br><br>
                &nbsp;&nbsp;<span class="text-slate-500"># 1. Guard Clause</span><br>
                &nbsp;&nbsp;<span class="text-purple-400">if not</span> req: <span class="text-purple-400">return</span>
                "Error"

                <br><br>
                &nbsp;&nbsp;<span class="text-slate-500"># 2. Logic</span><br>
                &nbsp;&nbsp;result = perform_calc(req)

                <br><br>
                &nbsp;&nbsp;<span class="text-slate-500"># 3. Return Data</span><br>
                &nbsp;&nbsp;<span class="text-purple-400">return</span> f"Result: {result}"
            </div>
            <div class="mt-6 text-center">
                <p class="text-slate-400 text-sm">Congratulations over 28 sessions!</p>
            </div>
        </section>

    </main>

    <!-- Navigation Script -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const overlay = document.getElementById('accessOverlay');
            const input = document.getElementById('accessCodeInput');
            const btn = document.getElementById('accessBtn');
            const error = document.getElementById('accessError');
            const CODE = 'RGMDSHS25';

            function checkCode() {
                if (input.value.toUpperCase().trim() === CODE) {
                    overlay.style.opacity = '0';
                    setTimeout(() => overlay.style.display = 'none', 300);
                } else {
                    error.classList.remove('hidden');
                    input.classList.add('border-red-500');
                    setTimeout(() => input.classList.remove('border-red-500'), 1000);
                }
            }

            if (btn && input) {
                btn.addEventListener('click', checkCode);
                input.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') checkCode();
                });
            }

            // Slide Navigation
            const slides = document.querySelectorAll('.slide');
            const bar = document.getElementById('bar');
            const ind = document.getElementById('slideIndicator');
            let curr = 0;

            window.showSlide = (n) => {
                if (n >= 0 && n < slides.length) {
                    slides[curr].classList.remove('active');
                    curr = n;
                    slides[curr].classList.add('active');
                    bar.style.width = ((curr + 1) / slides.length) * 100 + "%";
                    ind.innerText = `${curr + 1}/${slides.length}`;
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                    document.getElementById('btnPrev').disabled = curr === 0;
                    document.getElementById('btnNext').disabled = curr === slides.length - 1;
                }
            };

            document.getElementById('btnPrev').onclick = () => showSlide(curr - 1);
            document.getElementById('btnNext').onclick = () => showSlide(curr + 1);

            // Keyboard Navigation
            document.addEventListener('keydown', (e) => {
                if (e.target.tagName === 'TEXTAREA' || e.target.tagName === 'INPUT') return; // Don't block typing
                if (e.key === "ArrowRight") showSlide(curr + 1);
                if (e.key === "ArrowLeft") showSlide(curr - 1);
            });
        });

        /* ===== NEW: helper functions for interactivity ===== */
        function reveal(id, msg) {
            const el = document.getElementById(id);
            if (!el) return;
            el.classList.add('toast', 'show');
            el.innerText = msg;
        }
        function mc(id, msg) {
            const el = document.getElementById(id);
            if (!el) return;
            el.innerText = msg;
            el.className = 'mt-3 text-sm font-semibold text-slate-200';
        }
        function decide(id, pick, msg) {
            const el = document.getElementById(id);
            if (!el) return;
            el.innerText = msg + ` (Pilihan kamu: ${pick.toUpperCase()})`;
            el.className = 'mt-3 text-sm font-semibold text-slate-200';
        }

        function runChain() {
            const raw = document.getElementById('chRaw');
            const clean = document.getElementById('chClean');
            const save = document.getElementById('chSave');
            const msg = document.getElementById('chMsg');
            if (!raw || !clean || !save || !msg) return;
            raw.innerText = '?'; clean.innerText = '?'; save.innerText = '?';
            msg.innerText = 'Mulai...';
            setTimeout(() => { raw.innerText = '"  Hello  "'; raw.className = 'text-indigo-300'; msg.innerText = '1) get_input() menghasilkan data mentah (raw).'; }, 300);
            setTimeout(() => { clean.innerText = '"hello"'; clean.className = 'text-emerald-300'; msg.innerText = '2) sanitizer(raw) membersihkan spasi & casing.'; }, 800);
            setTimeout(() => { save.innerText = 'True'; save.className = 'text-green-300'; msg.innerText = '3) save_database(clean) menyimpan hasil. Estafet data sukses ‚úÖ'; }, 1300);
        }

        function scopeSim(mode) {
            const out = document.getElementById('scOut');
            if (!out) return;
            if (mode === 'inside') {
                out.innerText = 'Output: ABC (OK, karena masih di dalam scope)';
                out.className = 'mt-2 text-green-300';
            } else {
                out.innerText = 'Output: NameError (secret tidak dikenal di luar fungsi)';
                out.className = 'mt-2 text-red-300';
            }
        }

        function doUnpack() {
            const uw = document.getElementById('uw');
            const uh = document.getElementById('uh');
            const msg = document.getElementById('unpackMsg');
            if (!uw || !uh || !msg) return;
            uw.innerText = '1920'; uw.className = 'text-emerald-300';
            uh.innerText = '1080'; uh.className = 'text-emerald-300';
            msg.innerText = '‚úÖ Tuple (1920, 1080) di-unpack jadi w=1920 dan h=1080.';
        }

        /* Hint buttons */
        document.addEventListener('click', (e) => {
            const btn = e.target.closest('[data-hint-btn]');
            if (!btn) return;
            const wrapId = btn.getAttribute('data-hint-wrap');
            const level = btn.getAttribute('data-hint-level');
            const wrap = document.getElementById(wrapId);
            if (!wrap) return;
            wrap.querySelectorAll('.hint-box').forEach(x => x.classList.remove('active'));
            const box = wrap.querySelector(`.hint-box[data-hint="${level}"]`);
            if (box) box.classList.add('active');
        });

        /* Target badge updater */
        function setupTargetBadges() {
            const badges = document.querySelectorAll('[data-target-out]');
            badges.forEach(badge => {
                const outId = badge.getAttribute('data-target-out');
                const mustContain = (badge.getAttribute('data-target-contains') || '').toLowerCase();
                const keywords = (badge.getAttribute('data-target-kws') || '').split(',').map(s => s.trim()).filter(Boolean);
                const outEl = document.getElementById(outId);
                if (!outEl) return;

                const obs = new MutationObserver(() => {
                    const txt = (outEl.innerText || '').toLowerCase();
                    if (txt.includes('running') || txt.includes('syntax error') || txt.includes('runtime error')) {
                        badge.classList.remove('ok', 'err'); badge.classList.add('warn');
                        const s = badge.querySelector('.status');
                        if (s) s.innerText = '‚è≥ Periksa error dulu';
                        return;
                    }

                    let pass = true;
                    if (mustContain && !txt.includes(mustContain)) pass = false;

                    const codeId = badge.getAttribute('data-target-code');
                    if (codeId) {
                        const codeVal = (document.getElementById(codeId)?.value || '');
                        for (const k of keywords) {
                            if (k && !codeVal.includes(k)) pass = false;
                        }
                    }

                    badge.classList.remove('warn', 'ok', 'err');
                    badge.classList.add(pass ? 'ok' : 'err');
                    const s = badge.querySelector('.status');
                    if (s) s.innerText = pass ? '‚úÖ Target tercapai' : '‚ùå Belum sesuai target';
                });

                obs.observe(outEl, { childList: true, subtree: true, characterData: true });
            });
        }
        document.addEventListener('DOMContentLoaded', setupTargetBadges);

        /* Common mistake detectors for class reguler (friendly) */
        document.addEventListener('click', (e) => {
            const btn = e.target.closest("[data-action='check']");
            if (!btn) return;

            const codeId = btn.getAttribute('data-code');
            const fbId = btn.getAttribute('data-fb');
            if (!codeId || !fbId) return;

            const code = (document.getElementById(codeId)?.value || '');
            const fb = document.getElementById(fbId);
            if (!fb) return;

            const tips = [];

            if (codeId === 'c1') {
                if (code.includes('def login') && code.indexOf('login(') === code.lastIndexOf('def login')) {
                    tips.push('Kamu sudah membuat fungsi, tapi belum memanggilnya: `login("admin","1234")`.');
                }
            }
            if (codeId === 'c2') {
                if (code.includes('print(hasil)') && !code.includes('return')) tips.push('Masih `print(hasil)`. Ubah jadi `return hasil` supaya area tidak None.');
            }
            if (codeId === 'c3') {
                if (code.includes('mode=None')) tips.push('Default sebaiknya langsung `mode="Easy"` di parameter fungsi.');
            }
            if (codeId === 'c6') {
                if (!code.includes('if') || !code.includes('return "Too Young"')) tips.push('Tambahkan guard clause: `if age < 18: return "Too Young"`');
            }
            if (codeId === 'c7') {
                if (!code.includes('w, h') || !code.includes('get_screen()')) tips.push('Unpack dulu: `w, h = get_screen()`');
            }

            if (tips.length) {
                fb.classList.remove('hidden');
                fb.className = 'mt-2 text-xs font-semibold text-yellow-300 block';
                fb.innerText = 'üí° Petunjuk cepat: ' + tips.join(' ');
            }
        });

        /* Pipeline order mini-game */
        (function setupPipeDnD() {
            const items = Array.from(document.querySelectorAll('[data-pipe]')).length;
            const di = document.querySelectorAll('.slide .draggable-item');
            di.forEach(d => {
                d.addEventListener('dragstart', e => {
                    const text = e.target.innerText;
                    e.dataTransfer.setData('text/plain', text);
                    e.dataTransfer.setData('t', text);
                });
            });
            document.querySelectorAll('.slide .drop-zone').forEach(z => {
                z.addEventListener('dragover', e => { e.preventDefault(); z.classList.add('drag-over'); });
                z.addEventListener('dragleave', () => z.classList.remove('drag-over'));
                z.addEventListener('drop', e => {
                    e.preventDefault();
                    z.classList.remove('drag-over');
                    const t = e.dataTransfer.getData('text/plain') || e.dataTransfer.getData('t');
                    if (!t) return;
                    z.innerText = t;
                    z.classList.add('bg-indigo-900');
                });
            });
        })();

        function checkPipeOrder() {
            const a = document.querySelector('[data-pipe="1"]')?.innerText?.trim();
            const b = document.querySelector('[data-pipe="2"]')?.innerText?.trim();
            const c = document.querySelector('[data-pipe="3"]')?.innerText?.trim();
            const fb = document.getElementById('pipeFb');
            if (!fb) return;

            if (!a || !b || !c) {
                fb.innerText = '‚ö†Ô∏è Isi dulu ketiga slotnya.';
                fb.className = 'mt-3 text-sm font-semibold text-yellow-300';
                return;
            }
            const ok = (a === 'Aduk()' && b === 'Panggang()' && c === 'Hias()');
            fb.innerText = ok ? '‚úÖ Benar! Urutannya Aduk ‚Üí Panggang ‚Üí Hias.' : '‚ùå Belum tepat. Hint: Aduk dulu, lalu Panggang, terakhir Hias.';
            fb.className = ok ? 'mt-3 text-sm font-semibold text-green-300' : 'mt-3 text-sm font-semibold text-red-300';
        }

        function resetPipe() {
            document.querySelectorAll('[data-pipe]').forEach(z => { z.innerText = ''; z.classList.remove('bg-indigo-900'); });
            const fb = document.getElementById('pipeFb');
            if (fb) fb.innerText = '';
        }

        /* MP2 tests runner (JS-side, non-invasive) */
        function runMP2Tests() {
            const code = document.getElementById('mp2')?.value || '';
            const t1 = document.getElementById('t1');
            const t2 = document.getElementById('t2');
            const t3 = document.getElementById('t3');
            const prog = document.getElementById('mp2prog');
            if (!t1 || !t2 || !t3 || !prog) return;

            // Heuristic checks
            const callsDiskon = code.includes('hitung_diskon(');
            const callsOngkir = code.includes('hitung_ongkir(');
            const callsTotal = (code.includes('-') && code.includes('+'));

            const r1 = callsDiskon;
            const r2 = callsOngkir;
            const r3 = callsTotal;

            t1.innerText = r1 ? '‚úÖ pass' : '‚ùå panggil hitung_diskon'; t1.className = r1 ? 'text-green-300' : 'text-red-300';
            t2.innerText = r2 ? '‚úÖ pass' : '‚ùå panggil hitung_ongkir'; t2.className = r2 ? 'text-green-300' : 'text-red-300';
            t3.innerText = r3 ? '‚úÖ pass' : '‚ùå cek rumus (+/-)'; t3.className = r3 ? 'text-green-300' : 'text-red-300';

            const passed = [r1, r2, r3].filter(Boolean).length;
            prog.innerText = `${passed}/3 oke`;
            prog.classList.remove('ok', 'warn', 'err');
            prog.classList.add(passed === 3 ? 'ok' : (passed === 0 ? 'err' : 'warn'));
        }

        /* Boss tests runner (JS-side heuristic) */
        function runBossTests() {
            const code = document.getElementById('fb')?.value || '';
            const b1 = document.getElementById('b1');
            const b2 = document.getElementById('b2');
            const prog = document.getElementById('bossProg');
            if (!b1 || !b2 || !prog) return;

            const hasMasuk = (code.includes('return "MASUK"') || code.includes("return 'MASUK'"));
            const hasTolak = (code.includes('return "DITOLAK"') || code.includes("return 'DITOLAK'"));
            // Accommodate variants like nama=='Bos' or nama == "Bos"
            const hasCond = (code.includes('Bos') && code.includes('123') && code.includes('and'));

            const r1 = hasMasuk && hasCond;
            const r2 = hasTolak;

            b1.innerText = r1 ? '‚úÖ pass' : '‚ùå cek nama & sandi'; b1.className = r1 ? 'text-green-300' : 'text-red-300';
            b2.innerText = r2 ? '‚úÖ pass' : '‚ùå return DITOLAK'; b2.className = r2 ? 'text-green-300' : 'text-red-300';

            const passed = [r1, r2].filter(Boolean).length;
            prog.innerText = `${passed}/2 aman`;
            prog.classList.remove('ok', 'warn', 'err');
            prog.classList.add(passed === 2 ? 'ok' : (passed === 0 ? 'err' : 'warn'));
        }
    </script>
</body>

</html>